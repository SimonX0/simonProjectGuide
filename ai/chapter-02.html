<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LangChainæ¡†æ¶ | å°å¾çš„æŠ€æœ¯å……ç”µç«™</title>
    <meta name="description" content="å°å¾æŠ€æœ¯å……ç”µç«™ - ä»é›¶åˆ°ä¼ä¸šçº§é¡¹ç›®å®æˆ˜">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/simonProjectGuide/assets/style.Bg1P1HuT.css" as="style">
    <link rel="preload stylesheet" href="/simonProjectGuide/vp-icons.css" as="style">
    
    <script type="module" src="/simonProjectGuide/assets/app.CoyCgwV8.js"></script>
    <link rel="preload" href="/simonProjectGuide/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/simonProjectGuide/assets/chunks/theme.C-RIbUt3.js">
    <link rel="modulepreload" href="/simonProjectGuide/assets/chunks/framework.C63nTIu3.js">
    <link rel="modulepreload" href="/simonProjectGuide/assets/ai_chapter-02.md.CGR827nK.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="theme-color" content="#42b883">
    <meta name="og:type" content="website">
    <meta name="og:locale" content="zh-CN">
    <meta name="og:title" content="å°å¾çš„æŠ€æœ¯å……ç”µç«™">
    <meta name="og:description" content="å°å¾æŠ€æœ¯å……ç”µç«™ - ä»é›¶åˆ°ä¼ä¸šçº§é¡¹ç›®å®æˆ˜ã€‚">
    <meta name="og:image" content="/og-image.png">
    <link rel="stylesheet" href="/.vitepress/theme/custom.css">
    <script type="module" src="/.vitepress/style/loading.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a929ecdd><!--[--><!--]--><!--[--><span tabindex="-1" data-v-74952b49></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-74952b49>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a929ecdd data-v-8b9329a1><div class="VPNavBar" data-v-8b9329a1 data-v-e60e376d><div class="wrapper" data-v-e60e376d><div class="container" data-v-e60e376d><div class="title" data-v-e60e376d><div class="VPNavBarTitle has-sidebar" data-v-e60e376d data-v-8007b023><a class="title" href="/simonProjectGuide/" data-v-8007b023><!--[--><!--]--><!----><span data-v-8007b023>å°å¾çš„æŠ€æœ¯å……ç”µç«™</span><!--[--><!--]--></a></div></div><div class="content" data-v-e60e376d><div class="content-body" data-v-e60e376d><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e60e376d><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e60e376d data-v-46a7dac0><span id="main-nav-aria-label" class="visually-hidden" data-v-46a7dac0> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/simonProjectGuide/" tabindex="0" data-v-46a7dac0 data-v-7f51157b><!--[--><span data-v-7f51157b>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-46a7dac0 data-v-c6690ae9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c6690ae9><span class="text" data-v-c6690ae9><!----><span data-v-c6690ae9>å‰ç«¯å¼€å‘</span><span class="vpi-chevron-down text-icon" data-v-c6690ae9></span></span></button><div class="menu" data-v-c6690ae9><div class="VPMenu" data-v-c6690ae9 data-v-cb9f272d><div class="items" data-v-cb9f272d><!--[--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/" data-v-bec6bc66><!--[--><span data-v-bec6bc66>å­¦ä¹ è·¯çº¿</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/chapter-00.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>åŸºç¡€å…¥é—¨</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/chapter-09.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>ç»„ä»¶å¼€å‘</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/chapter-16.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>ä¼ä¸šçº§å¼€å‘</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/chapter-25.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>è¿›é˜¶éƒ¨åˆ†</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/chapter-40.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>é«˜çº§æ‹“å±•</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/guide/appendix-projects.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>é™„å½•</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-46a7dac0 data-v-c6690ae9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c6690ae9><span class="text" data-v-c6690ae9><!----><span data-v-c6690ae9>Git æ•™ç¨‹</span><span class="vpi-chevron-down text-icon" data-v-c6690ae9></span></span></button><div class="menu" data-v-c6690ae9><div class="VPMenu" data-v-c6690ae9 data-v-cb9f272d><div class="items" data-v-cb9f272d><!--[--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/git/" data-v-bec6bc66><!--[--><span data-v-bec6bc66>å­¦ä¹ è·¯çº¿</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/git/chapter-01.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>åŸºç¡€å…¥é—¨</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/git/workflow.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>è¿›é˜¶</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-46a7dac0 data-v-c6690ae9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-c6690ae9><span class="text" data-v-c6690ae9><!----><span data-v-c6690ae9>AI æ•™ç¨‹</span><span class="vpi-chevron-down text-icon" data-v-c6690ae9></span></span></button><div class="menu" data-v-c6690ae9><div class="VPMenu" data-v-c6690ae9 data-v-cb9f272d><div class="items" data-v-cb9f272d><!--[--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/ai/" data-v-bec6bc66><!--[--><span data-v-bec6bc66>å­¦ä¹ è·¯çº¿</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/ai/chapter-00.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>åŸºç¡€å…¥é—¨</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/ai/chapter-03.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>è¿›é˜¶</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-cb9f272d data-v-bec6bc66><a class="VPLink link" href="/simonProjectGuide/ai/chapter-06.html" data-v-bec6bc66><!--[--><span data-v-bec6bc66>æ‹“å±•</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e60e376d data-v-6bd78ca3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6bd78ca3 data-v-3f0e2547 data-v-b800360c><span class="check" data-v-b800360c><span class="icon" data-v-b800360c><!--[--><span class="vpi-sun sun" data-v-3f0e2547></span><span class="vpi-moon moon" data-v-3f0e2547></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e60e376d data-v-1852be5d data-v-575387e5><!--[--><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e60e376d data-v-30781223 data-v-c6690ae9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-c6690ae9><span class="vpi-more-horizontal icon" data-v-c6690ae9></span></button><div class="menu" data-v-c6690ae9><div class="VPMenu" data-v-c6690ae9 data-v-cb9f272d><!----><!--[--><!--[--><!----><div class="group" data-v-30781223><div class="item appearance" data-v-30781223><p class="label" data-v-30781223>Appearance</p><div class="appearance-action" data-v-30781223><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-30781223 data-v-3f0e2547 data-v-b800360c><span class="check" data-v-b800360c><span class="icon" data-v-b800360c><!--[--><span class="vpi-sun sun" data-v-3f0e2547></span><span class="vpi-moon moon" data-v-3f0e2547></span><!--]--></span></span></button></div></div></div><div class="group" data-v-30781223><div class="item social-links" data-v-30781223><div class="VPSocialLinks social-links-list" data-v-30781223 data-v-575387e5><!--[--><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e60e376d data-v-0f64e54a><span class="container" data-v-0f64e54a><span class="top" data-v-0f64e54a></span><span class="middle" data-v-0f64e54a></span><span class="bottom" data-v-0f64e54a></span></span></button></div></div></div></div><div class="divider" data-v-e60e376d><div class="divider-line" data-v-e60e376d></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a929ecdd data-v-4d56a3b2><div class="container" data-v-4d56a3b2><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-4d56a3b2><span class="vpi-align-left menu-icon" data-v-4d56a3b2></span><span class="menu-text" data-v-4d56a3b2>èœå•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-4d56a3b2 data-v-e98c1692><button data-v-e98c1692>å›åˆ°é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-a929ecdd data-v-a0a9fc64><div class="curtain" data-v-a0a9fc64></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a0a9fc64><span class="visually-hidden" id="sidebar-aria-label" data-v-a0a9fc64> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-841af76f><section class="VPSidebarItem level-0 collapsible" data-v-841af76f data-v-835b4dc6><div class="item" role="button" tabindex="0" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><h2 class="text" data-v-835b4dc6>å­¦ä¹ è·¯çº¿</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-835b4dc6><span class="vpi-chevron-right caret-icon" data-v-835b4dc6></span></div></div><div class="items" data-v-835b4dc6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>å­¦ä¹ è·¯çº¿</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-841af76f><section class="VPSidebarItem level-0 collapsible has-active" data-v-841af76f data-v-835b4dc6><div class="item" role="button" tabindex="0" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><h2 class="text" data-v-835b4dc6>åŸºç¡€å…¥é—¨</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-835b4dc6><span class="vpi-chevron-right caret-icon" data-v-835b4dc6></span></div></div><div class="items" data-v-835b4dc6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-00.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬1ç« ï¼šAIè¾…åŠ©å¼€å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/tools-setup.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬2ç« ï¼šå·¥å…·é…ç½®æŒ‡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-01.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬3ç« ï¼šAIåº”ç”¨åŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-02.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬4ç« ï¼šLangChainæ¡†æ¶</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-841af76f><section class="VPSidebarItem level-0 collapsible" data-v-841af76f data-v-835b4dc6><div class="item" role="button" tabindex="0" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><h2 class="text" data-v-835b4dc6>è¿›é˜¶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-835b4dc6><span class="vpi-chevron-right caret-icon" data-v-835b4dc6></span></div></div><div class="items" data-v-835b4dc6><!--[--><section class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" tabindex="0" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-03.html" data-v-835b4dc6><!--[--><h3 class="text" data-v-835b4dc6>ç¬¬5ç« ï¼šPromptå·¥ç¨‹</h3><!--]--></a><!----></div><div class="items" data-v-835b4dc6><!--[--><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-03.html#%E6%A0%B8%E5%BF%83%E5%8E%9F%E5%88%99" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>æ ¸å¿ƒåŸåˆ™</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-03.html#%E5%B8%B8%E7%94%A8%E6%8F%90%E7%A4%BA%E8%AF%8D%E6%A8%A1%E5%BC%8F" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>å¸¸ç”¨æç¤ºè¯æ¨¡å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-03.html#%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>é«˜çº§æŠ€å·§</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-04.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬6ç« ï¼šRAGæ£€ç´¢å¢å¼º</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-05.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬7ç« ï¼šAI Agent</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-841af76f><section class="VPSidebarItem level-0 collapsible" data-v-841af76f data-v-835b4dc6><div class="item" role="button" tabindex="0" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><h2 class="text" data-v-835b4dc6>æ‹“å±•</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-835b4dc6><span class="vpi-chevron-right caret-icon" data-v-835b4dc6></span></div></div><div class="items" data-v-835b4dc6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-06.html" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ç¬¬8ç« ï¼šå®æˆ˜é¡¹ç›®</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" tabindex="0" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html" data-v-835b4dc6><!--[--><h3 class="text" data-v-835b4dc6>ç¬¬9ç« ï¼šåº”ç”¨è¿›é˜¶</h3><!--]--></a><!----></div><div class="items" data-v-835b4dc6><!--[--><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#%E4%B8%BB%E6%B5%81llm%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>ä¸»æµLLMæ¨¡å‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#claude-api%E4%BD%BF%E7%94%A8" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>Claude API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#%E5%BC%80%E6%BA%90%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>æœ¬åœ°æ¨¡å‹éƒ¨ç½²</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#moltbot%E6%A1%86%E6%9E%B6" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>Moltbotæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#langgraph%E5%A4%8D%E6%9D%82agent%E6%A1%86%E6%9E%B6" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>LangGraphæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#langgraph-%E5%B8%B8%E8%A7%81%E6%A8%A1%E5%BC%8F" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>LangGraphå¸¸è§æ¨¡å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE%E6%99%BA%E8%83%BD%E5%86%85%E5%AE%B9%E7%94%9F%E6%88%90%E7%B3%BB%E7%BB%9F" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>LangGraphå®æˆ˜é¡¹ç›®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-835b4dc6 data-v-835b4dc6><div class="item" data-v-835b4dc6><div class="indicator" data-v-835b4dc6></div><a class="VPLink link link" href="/simonProjectGuide/ai/chapter-07.html#ai%E5%BA%94%E7%94%A8%E8%AF%84%E4%BC%B0%E5%92%8C%E6%B5%8B%E8%AF%95" data-v-835b4dc6><!--[--><p class="text" data-v-835b4dc6>åº”ç”¨è¯„ä¼°</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a929ecdd data-v-cc245c62><div class="VPDoc has-sidebar has-aside" data-v-cc245c62 data-v-a22668dc><!--[--><!--]--><div class="container" data-v-a22668dc><div class="aside" data-v-a22668dc><div class="aside-curtain" data-v-a22668dc></div><div class="aside-container" data-v-a22668dc><div class="aside-content" data-v-a22668dc><div class="VPDocAside" data-v-a22668dc data-v-cb6700bd><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb6700bd data-v-1cb0dafe><div class="content" data-v-1cb0dafe><div class="outline-marker" data-v-1cb0dafe></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-1cb0dafe>æœ¬é¡µç›®å½•</div><ul class="VPDocOutlineItem root" data-v-1cb0dafe data-v-86fcb5f5><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb6700bd></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-a22668dc><div class="content-container" data-v-a22668dc><!--[--><!--]--><main class="main" data-v-a22668dc><div style="position:relative;" class="vp-doc _simonProjectGuide_ai_chapter-02" data-v-a22668dc><div><h1 id="langchainæ¡†æ¶" tabindex="-1">LangChainæ¡†æ¶ <a class="header-anchor" href="#langchainæ¡†æ¶" aria-label="Permalink to &quot;LangChainæ¡†æ¶&quot;">â€‹</a></h1><h2 id="æœ¬ç« å¯¼è¯»" tabindex="-1">æœ¬ç« å¯¼è¯» <a class="header-anchor" href="#æœ¬ç« å¯¼è¯»" aria-label="Permalink to &quot;æœ¬ç« å¯¼è¯»&quot;">â€‹</a></h2><p>åœ¨ç¬¬1ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ç›´æ¥è°ƒç”¨OpenAI APIæ„å»ºç®€å•çš„AIåº”ç”¨ã€‚ä½†éšç€åº”ç”¨å˜å¾—å¤æ‚ï¼Œç›´æ¥ä½¿ç”¨APIä¼šé‡åˆ°å¾ˆå¤šæŒ‘æˆ˜ï¼šå¦‚ä½•ç®¡ç†å¯¹è¯å†å²ï¼Ÿå¦‚ä½•ä¸²è”å¤šä¸ªæ­¥éª¤ï¼Ÿå¦‚ä½•é›†æˆå¤–éƒ¨æ•°æ®ï¼Ÿ</p><p><strong>LangChain</strong> æ˜¯ç›®å‰æœ€æµè¡Œçš„LLMåº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·é“¾ï¼Œå¤§å¤§ç®€åŒ–äº†LLMåº”ç”¨çš„å¼€å‘ã€‚</p><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼š</p><ul><li>ç†è§£LangChainçš„æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„</li><li>æŒæ¡Model I/Oï¼šæ¨¡å‹ã€æç¤ºè¯ã€è¾“å‡ºè§£æ</li><li>å­¦ä¹ Chainsï¼šä¸²è”å¤šä¸ªæ“ä½œ</li><li>å®ç°Memoryï¼šå¯¹è¯è®°å¿†ç®¡ç†</li></ul><p><strong>é¢„è®¡å­¦ä¹ æ—¶é—´</strong>ï¼š60åˆ†é’Ÿ</p><hr><h2 id="ä»€ä¹ˆæ˜¯langchain" tabindex="-1">ä»€ä¹ˆæ˜¯LangChainï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯langchain" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯LangChainï¼Ÿ&quot;">â€‹</a></h2><h3 id="langchainç®€ä»‹" tabindex="-1">LangChainç®€ä»‹ <a class="header-anchor" href="#langchainç®€ä»‹" aria-label="Permalink to &quot;LangChainç®€ä»‹&quot;">â€‹</a></h3><p><strong>LangChain</strong> æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œä¸“é—¨ç”¨äºå¼€å‘åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„åº”ç”¨ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—æ¨¡å—åŒ–çš„ç»„ä»¶ï¼Œè®©ä½ å¯ä»¥è½»æ¾æ„å»ºå¤æ‚çš„AIåº”ç”¨ã€‚</p><p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç›´æ¥ä½¿ç”¨APIçš„é—®é¢˜ï¼š</span></span>
<span class="line"><span>  âŒ æç¤ºè¯ç®¡ç†æ··ä¹±</span></span>
<span class="line"><span>  âŒ éš¾ä»¥ä¸²è”å¤šä¸ªæ­¥éª¤</span></span>
<span class="line"><span>  âŒ å¯¹è¯å†å²éœ€è¦æ‰‹åŠ¨ç»´æŠ¤</span></span>
<span class="line"><span>  âŒ éš¾ä»¥é›†æˆå¤–éƒ¨æ•°æ®</span></span>
<span class="line"><span>  âŒ ç¼ºä¹æ ‡å‡†åŒ–ç»„ä»¶</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LangChainçš„è§£å†³æ–¹æ¡ˆï¼š</span></span>
<span class="line"><span>  âœ… æç¤ºè¯æ¨¡æ¿åŒ–ç®¡ç†</span></span>
<span class="line"><span>  âœ… Chainé“¾å¼è°ƒç”¨</span></span>
<span class="line"><span>  âœ… Memoryè‡ªåŠ¨ç®¡ç†</span></span>
<span class="line"><span>  âœ… Data Connectioné›†æˆ</span></span>
<span class="line"><span>  âœ… ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="langchainçš„å…­å¤§æ ¸å¿ƒæ¨¡å—" tabindex="-1">LangChainçš„å…­å¤§æ ¸å¿ƒæ¨¡å— <a class="header-anchor" href="#langchainçš„å…­å¤§æ ¸å¿ƒæ¨¡å—" aria-label="Permalink to &quot;LangChainçš„å…­å¤§æ ¸å¿ƒæ¨¡å—&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚          LangChain æ¶æ„å›¾                     â”‚</span></span>
<span class="line"><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â”‚  ğŸ“¦ Model I/O      æ¨¡å‹è¾“å…¥è¾“å‡º                â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Models    LLMåŒ…è£…å’Œç»Ÿä¸€æ¥å£            â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Prompts   æç¤ºè¯æ¨¡æ¿                   â”‚</span></span>
<span class="line"><span>â”‚    â””â”€â”€ Parsers   è¾“å‡ºè§£æå™¨                   â”‚</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â”‚  ğŸ”— Chains        é“¾å¼è°ƒç”¨                    â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ LLMChain  åŸºç¡€é“¾                      â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Sequential é¡ºåºé“¾                     â”‚</span></span>
<span class="line"><span>â”‚    â””â”€â”€ Router    è·¯ç”±é“¾                      â”‚</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â”‚  ğŸ§  Memory        è®°å¿†ç®¡ç†                    â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Buffer    ç¼“å†²è®°å¿†                    â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Summary   æ‘˜è¦è®°å¿†                    â”‚</span></span>
<span class="line"><span>â”‚    â””â”€â”€ Knowledge çŸ¥è¯†å›¾è°±è®°å¿†                 â”‚</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â”‚  ğŸ“š Retrieval     æ£€ç´¢ç”Ÿæˆ                    â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Loaders   æ–‡æ¡£åŠ è½½å™¨                   â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Splitters æ–‡æœ¬åˆ†å‰²å™¨                  â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Embeddings å‘é‡åŒ–                    â”‚</span></span>
<span class="line"><span>â”‚    â””â”€â”€ VectorStores å‘é‡æ•°æ®åº“               â”‚</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â”‚  ğŸ¤– Agents        æ™ºèƒ½ä»£ç†                    â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Tools     å·¥å…·å®šä¹‰                    â”‚</span></span>
<span class="line"><span>â”‚    â”œâ”€â”€ Agent     ä»£ç†ç±»å‹                    â”‚</span></span>
<span class="line"><span>â”‚    â””â”€â”€ Executor  æ‰§è¡Œå™¨                      â”‚</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â”‚  ğŸ”§ Chains        å·¥å…·å’Œå›è°ƒ                  â”‚</span></span>
<span class="line"><span>â”‚    â””â”€â”€ Callbacks è§‚å¯Ÿå’Œç›‘å¬                   â”‚</span></span>
<span class="line"><span>â”‚                                              â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="å®‰è£…langchain" tabindex="-1">å®‰è£…LangChain <a class="header-anchor" href="#å®‰è£…langchain" aria-label="Permalink to &quot;å®‰è£…LangChain&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ ¸å¿ƒåŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OpenAIé›†æˆ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain-openai</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¶ä»–å¸¸ç”¨åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain-community</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ç¤¾åŒºæ‰©å±•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chromadb</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # å‘é‡æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> faiss-cpu</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # å‘é‡æœç´¢</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®Œæ•´ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain-openai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain-community</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chromadb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><h2 id="model-i-o-æ¨¡å‹è¾“å…¥è¾“å‡º" tabindex="-1">Model I/Oï¼šæ¨¡å‹è¾“å…¥è¾“å‡º <a class="header-anchor" href="#model-i-o-æ¨¡å‹è¾“å…¥è¾“å‡º" aria-label="Permalink to &quot;Model I/Oï¼šæ¨¡å‹è¾“å…¥è¾“å‡º&quot;">â€‹</a></h2><p>Model I/Oæ˜¯LangChainæœ€åŸºç¡€çš„æ¨¡å—ï¼ŒåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p><ul><li><strong>Models</strong>ï¼šä¸å¤§è¯­è¨€æ¨¡å‹äº¤äº’</li><li><strong>Prompts</strong>ï¼šç®¡ç†æç¤ºè¯</li><li><strong>Output Parsers</strong>ï¼šè§£ææ¨¡å‹è¾“å‡º</li></ul><h3 id="models-æ¨¡å‹æ¥å£" tabindex="-1">Modelsï¼šæ¨¡å‹æ¥å£ <a class="header-anchor" href="#models-æ¨¡å‹æ¥å£" aria-label="Permalink to &quot;Modelsï¼šæ¨¡å‹æ¥å£&quot;">â€‹</a></h3><p>LangChainæä¾›äº†ç»Ÿä¸€çš„æ¨¡å‹æ¥å£ï¼Œæ”¯æŒå¤šç§æ¨¡å‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Chatæ¨¡å‹ï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Config.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPENAI_API_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    max_tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Completionæ¨¡å‹ï¼ˆæ—§ç‰ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAI(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo-instruct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Config.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPENAI_API_KEY</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(message)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AIçš„å›å¤</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>Messageç±»å‹</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HumanMessage,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äººç±»æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    AIMessage,         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AIæ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SystemMessage,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç³»ç»Ÿæ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ToolMessage        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å·¥å…·æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºæ¶ˆæ¯åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SystemMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„Pythonå¯¼å¸ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(messages)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="prompts-æç¤ºè¯æ¨¡æ¿" tabindex="-1">Promptsï¼šæç¤ºè¯æ¨¡æ¿ <a class="header-anchor" href="#prompts-æç¤ºè¯æ¨¡æ¿" aria-label="Permalink to &quot;Promptsï¼šæç¤ºè¯æ¨¡æ¿&quot;">â€‹</a></h3><h4 id="åŸºç¡€æç¤ºè¯æ¨¡æ¿" tabindex="-1">åŸºç¡€æç¤ºè¯æ¨¡æ¿ <a class="header-anchor" href="#åŸºç¡€æç¤ºè¯æ¨¡æ¿" aria-label="Permalink to &quot;åŸºç¡€æç¤ºè¯æ¨¡æ¿&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹å¼1ï¼šä½¿ç”¨PromptTemplate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è§£é‡Š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{concept}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è¿™ä¸ªæ¦‚å¿µï¼Œç”¨</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{style}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">çš„é£æ ¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;concept&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¡«å……æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">formatted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt.format(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    concept</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœºå™¨å­¦ä¹ &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é€šä¿—æ˜“æ‡‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(formatted)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºï¼šè¯·è§£é‡Šæœºå™¨å­¦ä¹ è¿™ä¸ªæ¦‚å¿µï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„é£æ ¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="chatæç¤ºè¯æ¨¡æ¿" tabindex="-1">Chatæç¤ºè¯æ¨¡æ¿ <a class="header-anchor" href="#chatæç¤ºè¯æ¨¡æ¿" aria-label="Permalink to &quot;Chatæç¤ºè¯æ¨¡æ¿&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{role}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">åŠ©æ‰‹ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{user_input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¡«å……å¹¶è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt_template.format_messages(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pythonç¼–ç¨‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    user_input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»€ä¹ˆæ˜¯åˆ—è¡¨æ¨å¯¼å¼ï¼Ÿ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(prompt)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="å®ç”¨çš„æç¤ºè¯æ¨¡æ¿" tabindex="-1">å®ç”¨çš„æç¤ºè¯æ¨¡æ¿ <a class="header-anchor" href="#å®ç”¨çš„æç¤ºè¯æ¨¡æ¿" aria-label="Permalink to &quot;å®ç”¨çš„æç¤ºè¯æ¨¡æ¿&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä»£ç ç”Ÿæˆæ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ª</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{language}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¼–ç¨‹ä¸“å®¶ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;è¯·å¸®æˆ‘å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    åŠŸèƒ½æè¿°ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{task}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    è¦æ±‚ï¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - ä»£ç è¦æœ‰æ³¨é‡Š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - åŒ…å«ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - è§£é‡Šæ—¶é—´å¤æ‚åº¦</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. æ–‡æ¡£åˆ†ææ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">doc_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªæ–‡æ¡£åˆ†æå¸ˆã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;è¯·åˆ†æä»¥ä¸‹æ–‡æ¡£ï¼š</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {document}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    ä»»åŠ¡ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{task}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    è¾“å‡ºæ ¼å¼ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{format}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. è§’è‰²æ‰®æ¼”æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">role_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;ä½ ç°åœ¨æ˜¯</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{role}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ã€‚</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    ä½ çš„ç‰¹ç‚¹æ˜¯ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{characteristics}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    ä½ çš„è¯´è¯é£æ ¼ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{style}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{question}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="output-parsers-è¾“å‡ºè§£æå™¨" tabindex="-1">Output Parsersï¼šè¾“å‡ºè§£æå™¨ <a class="header-anchor" href="#output-parsers-è¾“å‡ºè§£æå™¨" aria-label="Permalink to &quot;Output Parsersï¼šè¾“å‡ºè§£æå™¨&quot;">â€‹</a></h3><p>è¾“å‡ºè§£æå™¨è®©LLMçš„è¾“å‡ºæ›´ç»“æ„åŒ–ã€‚</p><h4 id="åŸºç¡€è§£æå™¨" tabindex="-1">åŸºç¡€è§£æå™¨ <a class="header-anchor" href="#åŸºç¡€è§£æå™¨" aria-label="Permalink to &quot;åŸºç¡€è§£æå™¨&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºè§£æå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output_parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨é“¾å¼è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> output_parser  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># | æ˜¯ç®¡é“æ“ä½œç¬¦</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»€ä¹ˆæ˜¯Pythonï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›´æ¥è¿”å›å­—ç¬¦ä¸²ï¼Œæ— éœ€.content</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="ç»“æ„åŒ–è¾“å‡ºè§£æå™¨" tabindex="-1">ç»“æ„åŒ–è¾“å‡ºè§£æå™¨ <a class="header-anchor" href="#ç»“æ„åŒ–è¾“å‡ºè§£æå™¨" aria-label="Permalink to &quot;ç»“æ„åŒ–è¾“å‡ºè§£æå™¨&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JsonOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å®šä¹‰æœŸæœ›çš„è¾“å‡ºæ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">format_instructions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è¯·ä»¥JSONæ ¼å¼å›å¤ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;summary&quot;: &quot;ç®€è¦æ€»ç»“&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;key_points&quot;: [&quot;è¦ç‚¹1&quot;, &quot;è¦ç‚¹2&quot;],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;difficulty&quot;: &quot;éš¾åº¦ç­‰çº§(1-5)&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;è¯·åˆ†æä»¥ä¸‹ä¸»é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{topic}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {format_instructions}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    partial_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;format_instructions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: format_instructions}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. åˆ›å»ºè§£æå™¨å’Œé“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JsonOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pythonè£…é¥°å™¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºï¼š{&#39;summary&#39;: &#39;...&#39;, &#39;key_points&#39;: [...], &#39;difficulty&#39;: 3}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="pydanticè§£æå™¨-æ¨è" tabindex="-1">Pydanticè§£æå™¨ï¼ˆæ¨èï¼‰ <a class="header-anchor" href="#pydanticè§£æå™¨-æ¨è" aria-label="Permalink to &quot;Pydanticè§£æå™¨ï¼ˆæ¨èï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PydanticOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydantic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseModel, Field</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å®šä¹‰æ•°æ®æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CodeAnalysis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä»£ç åˆ†æç»“æœ&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    language: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç¼–ç¨‹è¯­è¨€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    time_complexity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ—¶é—´å¤æ‚åº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    has_issues: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ˜¯å¦å­˜åœ¨é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    suggestions: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Field(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ”¹è¿›å»ºè®®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åˆ›å»ºè§£æå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PydanticOutputParser(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pydantic_object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CodeAnalysis)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. è·å–æ ¼å¼è¯´æ˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">format_instructions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser.get_format_instructions()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. åˆ›å»ºæç¤ºè¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;åˆ†æä»¥ä¸‹ä»£ç ï¼š</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {code}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {format_instructions}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    partial_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;format_instructions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: format_instructions}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. åˆ›å»ºé“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 6. è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;def foo(): return [i**2 for i in range(1000000)]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CodeAnalysis(language=&#39;Python&#39;, time_complexity=&#39;O(n)&#39;, has_issues=False, suggestions=[...])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><hr><h2 id="chains-é“¾å¼è°ƒç”¨" tabindex="-1">Chainsï¼šé“¾å¼è°ƒç”¨ <a class="header-anchor" href="#chains-é“¾å¼è°ƒç”¨" aria-label="Permalink to &quot;Chainsï¼šé“¾å¼è°ƒç”¨&quot;">â€‹</a></h2><p>Chainså…è®¸ä½ å°†å¤šä¸ªç»„ä»¶ä¸²è”èµ·æ¥ï¼Œæ„å»ºå¤æ‚çš„å·¥ä½œæµã€‚</p><h3 id="llmchain-æœ€åŸºæœ¬çš„é“¾" tabindex="-1">LLMChainï¼šæœ€åŸºæœ¬çš„é“¾ <a class="header-anchor" href="#llmchain-æœ€åŸºæœ¬çš„é“¾" aria-label="Permalink to &quot;LLMChainï¼šæœ€åŸºæœ¬çš„é“¾&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;product&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸º</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{product}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">äº§å“å†™ä¸€ä¸ªå¸å¼•äººçš„å¹¿å‘Šè¯­ï¼Œä¸è¶…è¿‡20å­—ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºé“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒç”¨é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.run(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ™ºèƒ½æ‰‹è¡¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &quot;è…•é—´æ™ºæ…§ï¼Œå¥åº·éšè¡Œï¼&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¹Ÿå¯ä»¥ç”¨invokeæ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;product&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ™ºèƒ½æ‰‹è¡¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="sequential-chain-é¡ºåºé“¾" tabindex="-1">Sequential Chainï¼šé¡ºåºé“¾ <a class="header-anchor" href="#sequential-chain-é¡ºåºé“¾" aria-label="Permalink to &quot;Sequential Chainï¼šé¡ºåºé“¾&quot;">â€‹</a></h3><p>æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ªé“¾ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SequentialChain</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Chain 1: ç”Ÿæˆæ•…äº‹å¤§çº²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outline_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸ºä¸»é¢˜&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{topic}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›ä½œä¸€ä¸ª3ç« çš„æ•…äº‹å¤§çº²&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outline_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outline_prompt,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outline&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Chain 2: æ ¹æ®å¤§çº²å†™ç¬¬ä¸€ç« </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chapter_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ ¹æ®ä»¥ä¸‹å¤§çº²å†™ç¬¬ä¸€ç« ï¼ˆ500å­—ï¼‰ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{outline}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chapter_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chapter_prompt,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chapter&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Chain 3: ä¸ºç« èŠ‚èµ·æ ‡é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">title_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chapter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸ºä»¥ä¸‹ç« èŠ‚èµ·ä¸€ä¸ªå¸å¼•äººçš„æ ‡é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{chapter}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">title_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">title_prompt,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;title&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»„åˆæˆé¡ºåºé“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">overall_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SequentialChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chains</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[outline_chain, chapter_chain, title_chain],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chapter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> overall_chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ—¶é—´æ—…è¡Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¤§çº²ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;outline&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç¬¬ä¸€ç« ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chapter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ ‡é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;title&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="ä½¿ç”¨lcel-langchain-expression-language" tabindex="-1">ä½¿ç”¨LCELï¼ˆLangChain Expression Languageï¼‰ <a class="header-anchor" href="#ä½¿ç”¨lcel-langchain-expression-language" aria-label="Permalink to &quot;ä½¿ç”¨LCELï¼ˆLangChain Expression Languageï¼‰&quot;">â€‹</a></h3><p>LCELæ˜¯LangChainæ¨èçš„æ–°è¯­æ³•ï¼Œæ›´ç®€æ´ä¼˜é›…ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ç®¡é“æ“ä½œç¬¦ |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®²ä¸€ä¸ªå…³äº</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{topic}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">çš„æ•…äº‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºé“¾ï¼šprompt | model | parser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å‹‡æ•¢çš„å°å…”å­&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="å¤æ‚çš„lcelé“¾" tabindex="-1">å¤æ‚çš„LCELé“¾ <a class="header-anchor" href="#å¤æ‚çš„lcelé“¾" aria-label="Permalink to &quot;å¤æ‚çš„LCELé“¾&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é“¾å¼è°ƒç”¨å¤šä¸ªç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.runnables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnablePassthrough</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å‡†å¤‡æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> prepare_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(inputs):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    topic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inputs[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: topic,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: inputs.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¹½é»˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: inputs.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;short&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åˆ›å»ºæç¤ºè¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_template(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ç”¨</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{style}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">çš„é£æ ¼å†™ä¸€ä¸ª</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{length}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">çš„æ•…äº‹ï¼Œä¸»é¢˜æ˜¯</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{topic}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ„å»ºé“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    RunnablePassthrough.assign(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: x.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¹½é»˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: x.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;short&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIå­¦ä¹ &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŠ±å¿—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;long&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="router-chain-è·¯ç”±é“¾" tabindex="-1">Router Chainï¼šè·¯ç”±é“¾ <a class="header-anchor" href="#router-chain-è·¯ç”±é“¾" aria-label="Permalink to &quot;Router Chainï¼šè·¯ç”±é“¾&quot;">â€‹</a></h3><p>æ ¹æ®è¾“å…¥å†…å®¹åŠ¨æ€é€‰æ‹©ä¸åŒçš„å¤„ç†é“¾ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RouterChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰å¤šä¸ªå¤„ç†é“¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Chain 1: ä»£ç ç›¸å…³</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªç¼–ç¨‹ä¸“å®¶ã€‚</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code_prompt)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Chain 2: æ–‡æœ¬ç›¸å…³</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªå†™ä½œåŠ©æ‰‹ã€‚</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_prompt)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Chain 3: é€šç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">general_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯AIåŠ©æ‰‹ã€‚</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">general_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">general_prompt)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·¯ç”±é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains.router </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MultiPromptChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains.router.llm_router </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMRouterChain, RouterOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains.router.multi_prompt_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MULTI_PROMPT_ROUTER_TEMPLATE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰è·¯ç”±çš„ç›®æ ‡å’Œæè¿°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">destinations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;code: ç¼–ç¨‹å’Œä»£ç ç›¸å…³é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;text: å†™ä½œå’Œæ–‡æœ¬ç›¸å…³é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;general: å…¶ä»–é€šç”¨é—®é¢˜&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºè·¯ç”±æç¤ºè¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MULTI_PROMPT_ROUTER_TEMPLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.format(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    destinations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">destinations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PromptTemplate(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router_template,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    input_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    output_parser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RouterOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºè·¯ç”±é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMRouterChain.from_llm(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    router_prompt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»„åˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MultiPromptChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    router_chain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router_chain,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    destination_chains</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: code_chain,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: text_chain,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;general&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: general_chain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    default_chain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">general_chain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¦‚ä½•åœ¨Pythonä¸­å®ç°å¿«é€Ÿæ’åºï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼šè‡ªåŠ¨è·¯ç”±åˆ°codeé“¾</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><hr><h2 id="memory-è®°å¿†ç®¡ç†" tabindex="-1">Memoryï¼šè®°å¿†ç®¡ç† <a class="header-anchor" href="#memory-è®°å¿†ç®¡ç†" aria-label="Permalink to &quot;Memoryï¼šè®°å¿†ç®¡ç†&quot;">â€‹</a></h2><p>Memoryç»„ä»¶è®©AIèƒ½å¤Ÿè®°ä½å¯¹è¯å†å²ï¼Œå®ç°å¤šè½®å¯¹è¯ã€‚</p><h3 id="conversationbuffermemory-ç¼“å†²è®°å¿†" tabindex="-1">ConversationBufferMemoryï¼šç¼“å†²è®°å¿† <a class="header-anchor" href="#conversationbuffermemory-ç¼“å†²è®°å¿†" aria-label="Permalink to &quot;ConversationBufferMemoryï¼šç¼“å†²è®°å¿†&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºè®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºå¯¹è¯é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ‰“å°è¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€æ¬¡å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘å«å°æ˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response1)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AI: ä½ å¥½å°æ˜ï¼å¾ˆé«˜å…´è®¤è¯†ä½ ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬äºŒæ¬¡å¯¹è¯ï¼ˆAIè®°ä½äº†åå­—ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response2)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AI: ä½ å«å°æ˜ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹è®°å¿†å†å²</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(memory.load_memory_variables({}))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># {&#39;history&#39;: &#39;Human: æˆ‘å«å°æ˜\nAI: ä½ å¥½å°æ˜ï¼...&#39;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="conversationbufferwindowmemory-çª—å£è®°å¿†" tabindex="-1">ConversationBufferWindowMemoryï¼šçª—å£è®°å¿† <a class="header-anchor" href="#conversationbufferwindowmemory-çª—å£è®°å¿†" aria-label="Permalink to &quot;ConversationBufferWindowMemoryï¼šçª—å£è®°å¿†&quot;">â€‹</a></h3><p>åªä¿å­˜æœ€è¿‘Nè½®å¯¹è¯ï¼ŒèŠ‚çœTokenã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferWindowMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªä¿å­˜æœ€è¿‘3è½®å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferWindowMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›è¡Œå¤šè½®å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘å–œæ¬¢Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘ä¹Ÿå–œæ¬¢JavaScript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘æœ€å–œæ¬¢Rust&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘å–œæ¬¢ä»€ä¹ˆè¯­è¨€ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AIè®°å¾—æœ€è¿‘3è½®çš„å¯¹è¯ï¼Œä½†ä¸è®°å¾—æ›´æ—©çš„å†…å®¹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="conversationsummarymemory-æ‘˜è¦è®°å¿†" tabindex="-1">ConversationSummaryMemoryï¼šæ‘˜è¦è®°å¿† <a class="header-anchor" href="#conversationsummarymemory-æ‘˜è¦è®°å¿†" aria-label="Permalink to &quot;ConversationSummaryMemoryï¼šæ‘˜è¦è®°å¿†&quot;">â€‹</a></h3><p>å¯¹é•¿å¯¹è¯è¿›è¡Œæ‘˜è¦ï¼ŒèŠ‚çœTokenã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationSummaryMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ‘˜è¦è®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationSummaryMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›è¡Œå¤šè½®å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘æ˜¯å°æ˜ï¼Œæ˜¯ä¸€åç¨‹åºå‘˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘ä¸»è¦ç”¨Pythonå¼€å‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘åœ¨æ­å·å·¥ä½œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹æ‘˜è¦</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(memory.load_memory_variables({}))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç±»ä¼¼ï¼š&#39;summary&#39;: &#39;The human introduces themselves as Xiao Ming...&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="åœ¨lcelä¸­ä½¿ç”¨memory" tabindex="-1">åœ¨LCELä¸­ä½¿ç”¨Memory <a class="header-anchor" href="#åœ¨lcelä¸­ä½¿ç”¨memory" aria-label="Permalink to &quot;åœ¨LCELä¸­ä½¿ç”¨Memory&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate, MessagesPlaceholder</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HumanMessage, AIMessage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºåŒ…å«å†å²æ¶ˆæ¯çš„æç¤ºè¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„AIåŠ©æ‰‹ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    MessagesPlaceholder(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">variable_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†å²æ¶ˆæ¯å ä½ç¬¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºé“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€è½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">inputs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: history}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(inputs)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¿å­˜åˆ°å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">history.append(HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">history.append(AIMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.content))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬äºŒè½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">inputs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘å«ä»€ä¹ˆï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: history}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(inputs)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AIå¯ä»¥å¼•ç”¨ä¹‹å‰çš„å¯¹è¯</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="å®ç”¨çš„è®°å¿†ç®¡ç†æŠ€å·§" tabindex="-1">å®ç”¨çš„è®°å¿†ç®¡ç†æŠ€å·§ <a class="header-anchor" href="#å®ç”¨çš„è®°å¿†ç®¡ç†æŠ€å·§" aria-label="Permalink to &quot;å®ç”¨çš„è®°å¿†ç®¡ç†æŠ€å·§&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä¿å­˜å’ŒåŠ è½½è®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¿å­˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory_dict </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> memory.save_context(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·è¾“å…¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;output&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AIå›å¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    json.dump(memory.load_memory_variables({}), f)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    saved_memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json.load(f)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    memory.chat_memory.add_user_message(saved_memory[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;history&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. æ¸…ç©ºè®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory.clear()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. è·å–Tokenä½¿ç”¨é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.callbacks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_openai_callback</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_openai_callback() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cb:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conversation.predict(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Total Tokens: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cb.total_tokens</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Total Cost: $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cb.total_cost</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr><h2 id="ç»¼åˆå®æˆ˜-æ™ºèƒ½é—®ç­”ç³»ç»Ÿ" tabindex="-1">ç»¼åˆå®æˆ˜ï¼šæ™ºèƒ½é—®ç­”ç³»ç»Ÿ <a class="header-anchor" href="#ç»¼åˆå®æˆ˜-æ™ºèƒ½é—®ç­”ç³»ç»Ÿ" aria-label="Permalink to &quot;ç»¼åˆå®æˆ˜ï¼šæ™ºèƒ½é—®ç­”ç³»ç»Ÿ&quot;">â€‹</a></h2><p>è®©æˆ‘ä»¬å°†æ‰€å­¦çŸ¥è¯†æ•´åˆèµ·æ¥ï¼Œæ„å»ºä¸€ä¸ªæ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.prompts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate, MessagesPlaceholder</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SmartQA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ™ºèƒ½é—®ç­”ç³»ç»Ÿ&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åˆå§‹åŒ–æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Config.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MODEL_NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Config.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPENAI_API_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIåŠ©æ‰‹ï¼Œåå«å°å¾ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ä½ çš„ç‰¹ç‚¹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">- å›ç­”å‡†ç¡®ä¸“ä¸š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">- ä½¿ç”¨emojiå¢åŠ äº²å’ŒåŠ›</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">- é‡è¦å†…å®¹ç”¨åˆ—è¡¨å‘ˆç°</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">- ä¸ç¡®å®šçš„é—®é¢˜ä¼šè¯šå®å‘ŠçŸ¥&quot;&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MessagesPlaceholder(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">variable_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åˆ›å»ºè®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferMemory(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            return_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            memory_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;history&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åˆ›å»ºé“¾</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, question: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æé—®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è·å–å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.memory.chat_memory.messages</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è°ƒç”¨é“¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.chain.invoke({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: question,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: history</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ä¿å­˜åˆ°è®°å¿†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.memory.chat_memory.add_user_message(question)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.memory.chat_memory.add_ai_message(response)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> chat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;äº¤äº’å¼èŠå¤©&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ¤– æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼ˆè¾“å…¥&#39;quit&#39;é€€å‡ºï¼‰</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            question </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ä½ ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).strip()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> question.lower() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;quit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;é€€å‡º&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å°å¾ï¼šå†è§ï¼ğŸ‘‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> question:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                continue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                answer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ask(question)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å°å¾ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">answer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âŒ é”™è¯¯ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qa </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SmartQA()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    qa.chat()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><hr><h2 id="æœ€ä½³å®è·µ" tabindex="-1">æœ€ä½³å®è·µ <a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-label="Permalink to &quot;æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="æç¤ºè¯æ¨¡æ¿ç®¡ç†" tabindex="-1">æç¤ºè¯æ¨¡æ¿ç®¡ç† <a class="header-anchor" href="#æç¤ºè¯æ¨¡æ¿ç®¡ç†" aria-label="Permalink to &quot;æç¤ºè¯æ¨¡æ¿ç®¡ç†&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºtemplates.py</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PROMPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;code_assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{language}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç¼–ç¨‹ä¸“å®¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{question}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]),</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;writer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸“ä¸šå†™æ‰‹ï¼Œé£æ ¼</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{style}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸»é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{topic}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ï¼Œå­—æ•°ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{words}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]),</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;analyst&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯æ•°æ®åˆ†æå¸ˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æä»¥ä¸‹æ•°æ®ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{data}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> templates </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PROMPTS</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PROMPTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;code_assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="é”™è¯¯å¤„ç†å’Œé‡è¯•" tabindex="-1">é”™è¯¯å¤„ç†å’Œé‡è¯• <a class="header-anchor" href="#é”™è¯¯å¤„ç†å’Œé‡è¯•" aria-label="Permalink to &quot;é”™è¯¯å¤„ç†å’Œé‡è¯•&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenacity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retry, stop_after_attempt, wait_exponential</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.exceptions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LangChainException</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@retry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    stop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stop_after_attempt(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    wait</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wait_exponential(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">multiplier</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">min</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> safe_chain_invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chain, inputs):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å¸¦é‡è¯•çš„é“¾è°ƒç”¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(inputs)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LangChainException </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âš ï¸ è°ƒç”¨å¤±è´¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âŒ æœªçŸ¥é”™è¯¯: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="æˆæœ¬ä¼˜åŒ–" tabindex="-1">æˆæœ¬ä¼˜åŒ– <a class="header-anchor" href="#æˆæœ¬ä¼˜åŒ–" aria-label="Permalink to &quot;æˆæœ¬ä¼˜åŒ–&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨æ›´ä¾¿å®œçš„æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fast_llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">smart_llm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€å•ä»»åŠ¡ç”¨å¿«é€Ÿæ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">simple_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fast_llm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤æ‚ä»»åŠ¡ç”¨æ™ºèƒ½æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">complex_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> smart_llm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. ç¼“å­˜ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InMemoryCache</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.globals </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> set_llm_cache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">set_llm_cache(InMemoryCache())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šè¯·æ±‚API</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pythonæ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬äºŒæ¬¡ç›´æ¥ä»ç¼“å­˜è¯»å–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pythonæ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æµå¼è¾“å‡ºèŠ‚çœé¦–å­—èŠ‚æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.stream(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®²ä¸ªæ•…äº‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk.content, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">flush</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><hr><h2 id="æœ¬ç« å°ç»“" tabindex="-1">æœ¬ç« å°ç»“ <a class="header-anchor" href="#æœ¬ç« å°ç»“" aria-label="Permalink to &quot;æœ¬ç« å°ç»“&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒæ¦‚å¿µå›é¡¾" tabindex="-1">æ ¸å¿ƒæ¦‚å¿µå›é¡¾ <a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µå›é¡¾" aria-label="Permalink to &quot;æ ¸å¿ƒæ¦‚å¿µå›é¡¾&quot;">â€‹</a></h3><p>âœ… <strong>LangChainå…­å¤§æ¨¡å—</strong>ï¼š</p><ul><li>Model I/Oã€Chainsã€Memory</li><li>Retrievalã€Agentsã€Callbacks</li></ul><p>âœ… <strong>Model I/O</strong>ï¼š</p><ul><li>Modelsï¼šç»Ÿä¸€çš„æ¨¡å‹æ¥å£</li><li>Promptsï¼šæç¤ºè¯æ¨¡æ¿</li><li>Output Parsersï¼šç»“æ„åŒ–è¾“å‡º</li></ul><p>âœ… <strong>Chains</strong>ï¼š</p><ul><li>LLMChainï¼šåŸºç¡€é“¾</li><li>Sequential Chainï¼šé¡ºåºé“¾</li><li>Router Chainï¼šè·¯ç”±é“¾</li><li>LCELï¼šæ–°çš„é“¾å¼è¯­æ³•</li></ul><p>âœ… <strong>Memory</strong>ï¼š</p><ul><li>BufferMemoryï¼šå…¨éƒ¨è®°å¿†</li><li>WindowMemoryï¼šçª—å£è®°å¿†</li><li>SummaryMemoryï¼šæ‘˜è¦è®°å¿†</li></ul><h3 id="ä½ å·²ç»å­¦ä¼š" tabindex="-1">ä½ å·²ç»å­¦ä¼š <a class="header-anchor" href="#ä½ å·²ç»å­¦ä¼š" aria-label="Permalink to &quot;ä½ å·²ç»å­¦ä¼š&quot;">â€‹</a></h3><ul><li>âœ… ä½¿ç”¨LangChainç»Ÿä¸€æ¥å£è°ƒç”¨LLM</li><li>âœ… åˆ›å»ºå’Œç®¡ç†æç¤ºè¯æ¨¡æ¿</li><li>âœ… è§£æå’Œç»“æ„åŒ–è¾“å‡º</li><li>âœ… æ„å»ºå¤æ‚çš„é“¾å¼å·¥ä½œæµ</li><li>âœ… å®ç°å¯¹è¯è®°å¿†ç®¡ç†</li><li>âœ… æ„å»ºå®Œæ•´çš„é—®ç­”ç³»ç»Ÿ</li></ul><h3 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">â€‹</a></h3><p>æ­å–œå®Œæˆç¬¬2ç« ï¼ä½ å·²ç»æŒæ¡äº†LangChainçš„æ ¸å¿ƒç”¨æ³•ã€‚</p><p><strong>åœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ </strong>ï¼š</p><ul><li>Prompt Engineeringçš„æ ¸å¿ƒåŸåˆ™</li><li>é«˜çº§æç¤ºè¯æŠ€å·§å’Œæ¨¡å¼</li><li>Few-shot Learning</li><li>æç¤ºè¯ä¼˜åŒ–æ–¹æ³•</li></ul><p><strong>å‡†å¤‡å¥½äº†å—ï¼Ÿç»§ç»­ï¼</strong> ğŸš€</p><hr><h2 id="ç»ƒä¹ é¢˜" tabindex="-1">ç»ƒä¹ é¢˜ <a class="header-anchor" href="#ç»ƒä¹ é¢˜" aria-label="Permalink to &quot;ç»ƒä¹ é¢˜&quot;">â€‹</a></h2><h3 id="åŸºç¡€ç»ƒä¹ " tabindex="-1">åŸºç¡€ç»ƒä¹  <a class="header-anchor" href="#åŸºç¡€ç»ƒä¹ " aria-label="Permalink to &quot;åŸºç¡€ç»ƒä¹ &quot;">â€‹</a></h3><p><strong>ç»ƒä¹ 1</strong>ï¼šä½¿ç”¨LCELåˆ›å»ºä¸€ä¸ªé“¾ï¼Œå®ç°ï¼š</p><ul><li>æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬</li><li>ç¿»è¯‘æˆè‹±æ–‡</li><li>æ€»ç»“è‹±æ–‡å†…å®¹</li><li>è¿”å›ä¸­æ–‡æ‘˜è¦</li></ul><p><strong>ç»ƒä¹ 2</strong>ï¼šåˆ›å»ºä¸€ä¸ªå¸¦è®°å¿†çš„&quot;ä»£ç è§£é‡Šå™¨&quot;ï¼š</p><ul><li>å¯ä»¥è¿ç»­å¯¹è¯</li><li>è®°ä½ç”¨æˆ·æåˆ°çš„ä»£ç ç‰‡æ®µ</li><li>æä¾›é€æ­¥è§£é‡Š</li></ul><p><strong>ç»ƒä¹ 3</strong>ï¼šå®ç°Router Chainï¼Œæ ¹æ®é—®é¢˜ç±»å‹è‡ªåŠ¨é€‰æ‹©ï¼š</p><ul><li>ä»£ç é—®é¢˜ â†’ ä½¿ç”¨æŠ€æœ¯ä¸“å®¶è§’è‰²</li><li>åˆ›æ„é—®é¢˜ â†’ ä½¿ç”¨åˆ›æ„å†™æ‰‹è§’è‰²</li><li>å…¶ä»– â†’ ä½¿ç”¨é€šç”¨åŠ©æ‰‹è§’è‰²</li></ul><h3 id="è¿›é˜¶ç»ƒä¹ " tabindex="-1">è¿›é˜¶ç»ƒä¹  <a class="header-anchor" href="#è¿›é˜¶ç»ƒä¹ " aria-label="Permalink to &quot;è¿›é˜¶ç»ƒä¹ &quot;">â€‹</a></h3><p><strong>æŒ‘æˆ˜1</strong>ï¼šæ„å»º&quot;å­¦ä¹ åŠ©æ‰‹&quot;ç³»ç»Ÿ åŠŸèƒ½ï¼š</p><ul><li>è¿½è¸ªå­¦ä¹ è¿›åº¦</li><li>æ ¹æ®ç”¨æˆ·æ°´å¹³è°ƒæ•´å›ç­”æ·±åº¦</li><li>ç”Ÿæˆç»ƒä¹ é¢˜</li><li>æä¾›å­¦ä¹ å»ºè®®</li></ul><p><strong>æŒ‘æˆ˜2</strong>ï¼šå®ç°&quot;å¤šè½®å¯¹è¯æ–‡æ¡ˆç”Ÿæˆå™¨&quot; åœºæ™¯ï¼š</p><ul><li>ç¬¬ä¸€è½®ï¼šäº†è§£äº§å“ç‰¹ç‚¹</li><li>ç¬¬äºŒè½®ï¼šç¡®å®šç›®æ ‡å—ä¼—</li><li>ç¬¬ä¸‰è½®ï¼šé€‰æ‹©æ–‡æ¡ˆé£æ ¼</li><li>ç¬¬å››è½®ï¼šç”Ÿæˆå¤šä¸ªç‰ˆæœ¬</li></ul><hr><h2 id="å¸¸è§é—®é¢˜-faq" tabindex="-1">å¸¸è§é—®é¢˜ FAQ <a class="header-anchor" href="#å¸¸è§é—®é¢˜-faq" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜ FAQ&quot;">â€‹</a></h2><h3 id="q1-langchain-å’Œç›´æ¥è°ƒç”¨-openai-api-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1">Q1: LangChain å’Œç›´æ¥è°ƒç”¨ OpenAI API æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#q1-langchain-å’Œç›´æ¥è°ƒç”¨-openai-api-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-label="Permalink to &quot;Q1: LangChain å’Œç›´æ¥è°ƒç”¨ OpenAI API æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›´æ¥è°ƒç”¨APIçš„é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç†å¯¹è¯å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âŒ æç¤ºè¯å†™æ­»åœ¨ä»£ç é‡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âŒ éš¾ä»¥ä¸²è”å¤šä¸ªæ­¥éª¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âŒ æ²¡æœ‰æ ‡å‡†åŒ–çš„ç»„ä»¶</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LangChainçš„ä¼˜åŠ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ç»Ÿä¸€çš„æ¨¡å‹æ¥å£ï¼ˆåˆ‡æ¢æ¨¡å‹åªéœ€æ”¹ä¸€è¡Œä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… æç¤ºè¯æ¨¡æ¿åŒ–ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… Chainè‡ªåŠ¨ä¸²è”å¤šä¸ªæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… Memoryè‡ªåŠ¨ç®¡ç†å¯¹è¯å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ä¸°å¯Œçš„é¢„åˆ¶ç»„ä»¶å’Œé›†æˆ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹æ¯”ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›´æ¥è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> openai.ChatCompletion.create(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éœ€è¦æ‰‹åŠ¨ç»´æŠ¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LangChain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€æ´ä¼˜é›…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="q2-lcel-langchain-expression-language-æ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆè¦ç”¨" tabindex="-1">Q2: LCELï¼ˆLangChain Expression Languageï¼‰æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ <a class="header-anchor" href="#q2-lcel-langchain-expression-language-æ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆè¦ç”¨" aria-label="Permalink to &quot;Q2: LCELï¼ˆLangChain Expression Languageï¼‰æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LCELæ˜¯LangChainæ¨èçš„æ–°çš„é“¾å¼è¯­æ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç‰¹ç‚¹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ä½¿ç”¨ç®¡é“æ“ä½œç¬¦ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è¿æ¥ç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ä»£ç æ›´ç®€æ´æ˜“è¯»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… è‡ªåŠ¨æ”¯æŒæµå¼è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… å†…ç½®å¼‚æ­¥æ”¯æŒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼ ç»Ÿå†™æ³•ï¼ˆæ—§ç‰ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LLMChain(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.run(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">topic</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LCELå†™æ³•ï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LCELçš„ä¼˜åŠ¿åœ¨äºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. å£°æ˜å¼ï¼Œä»£ç å³æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. ç»„åˆæ€§å¼ºï¼Œå¯ä»¥ä»»æ„è¿æ¥ç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. è‡ªåŠ¨ä¼˜åŒ–ï¼Œæ€§èƒ½æ›´å¥½</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="q3-ä»€ä¹ˆæ—¶å€™ç”¨-conversationbuffermemory-ä»€ä¹ˆæ—¶å€™ç”¨-conversationsummarymemory" tabindex="-1">Q3: ä»€ä¹ˆæ—¶å€™ç”¨ ConversationBufferMemoryï¼Œä»€ä¹ˆæ—¶å€™ç”¨ ConversationSummaryMemoryï¼Ÿ <a class="header-anchor" href="#q3-ä»€ä¹ˆæ—¶å€™ç”¨-conversationbuffermemory-ä»€ä¹ˆæ—¶å€™ç”¨-conversationsummarymemory" aria-label="Permalink to &quot;Q3: ä»€ä¹ˆæ—¶å€™ç”¨ ConversationBufferMemoryï¼Œä»€ä¹ˆæ—¶å€™ç”¨ ConversationSummaryMemoryï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ConversationBufferMemory é€‚åˆï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¯¹è¯è½®æ¬¡ä¸å¤šï¼ˆ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> 10è½®</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> éœ€è¦è®°ä½å®Œæ•´å¯¹è¯å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tokené¢„ç®—å……è¶³</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¤ºä¾‹åœºæ™¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å®¢æœå¯¹è¯ï¼ˆçŸ­æœŸï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> é—®ç­”ç³»ç»Ÿï¼ˆä¼šè¯çŸ­ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âŒ ä¸é€‚åˆï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> é•¿å¯¹è¯ï¼ˆä¼šè¶…å‡ºTokené™åˆ¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æˆæœ¬æ•æ„Ÿçš„åº”ç”¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ConversationSummaryMemory é€‚åˆï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¯¹è¯è½®æ¬¡å¾ˆå¤šï¼ˆ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> 10è½®</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åªéœ€è¦å…³é”®ä¿¡æ¯ï¼Œä¸éœ€è¦å®Œæ•´å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æƒ³èŠ‚çœTokenæˆæœ¬</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¤ºä¾‹åœºæ™¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> é•¿æœŸå­¦ä¹ åŠ©æ‰‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¥åº·å’¨è¯¢ï¼ˆéœ€è¦è®°ä½å†å²ä½†ä¸éœ€è¦é€å­—è®°å½•ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âŒ ä¸é€‚åˆï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> éœ€è¦ç²¾ç¡®å¼•ç”¨ä¹‹å‰çš„å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¯¹è¯ç»†èŠ‚å¾ˆé‡è¦</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ConversationBufferWindowMemory é€‚åˆï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åªå…³å¿ƒæœ€è¿‘å‡ è½®å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¯¹è¯å¾ˆé•¿ä½†å†å²ä¸é‡è¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¹³è¡¡è®°å¿†å’Œæˆæœ¬</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¤ºä¾‹åœºæ™¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å®æ—¶èŠå¤©æœºå™¨äºº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> çŸ­æœŸä»»åŠ¡åŠ©æ‰‹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="q4-å¦‚ä½•åœ¨-chain-ä¸­ä¼ é€’å¤šä¸ªå˜é‡" tabindex="-1">Q4: å¦‚ä½•åœ¨ Chain ä¸­ä¼ é€’å¤šä¸ªå˜é‡ï¼Ÿ <a class="header-anchor" href="#q4-å¦‚ä½•åœ¨-chain-ä¸­ä¼ é€’å¤šä¸ªå˜é‡" aria-label="Permalink to &quot;Q4: å¦‚ä½•åœ¨ Chain ä¸­ä¼ é€’å¤šä¸ªå˜é‡ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•1ï¼šä½¿ç”¨å­—å…¸ä¼ é€’å¤šä¸ªå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_template(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ä½ æ˜¯</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{role}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ï¼Œç”¨</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{style}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">çš„é£æ ¼è§£é‡Š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{topic}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pythonä¸“å®¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¹½é»˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è£…é¥°å™¨&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•2ï¼šä½¿ç”¨RunnablePassthroughå¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.runnables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnablePassthrough</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    RunnablePassthrough.assign(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: x.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸“ä¸š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: x.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŠ©æ‰‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•3ï¼šä½¿ç”¨éƒ¨åˆ†å˜é‡ï¼ˆpartial_variablesï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_messages([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{role}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">åŠ©æ‰‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;human&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é¢„è®¾role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompt_partial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt.partial(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨æ—¶åªéœ€ä¼ input</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt_partial </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="q5-outputparser-æœ‰å“ªäº›ç±»å‹-å¦‚ä½•é€‰æ‹©" tabindex="-1">Q5: OutputParser æœ‰å“ªäº›ç±»å‹ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ <a class="header-anchor" href="#q5-outputparser-æœ‰å“ªäº›ç±»å‹-å¦‚ä½•é€‰æ‹©" aria-label="Permalink to &quot;Q5: OutputParser æœ‰å“ªäº›ç±»å‹ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. StrOutputParser - æœ€ç®€å•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚ç”¨ï¼šåªéœ€è¦çº¯æ–‡æœ¬è¾“å‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. JsonOutputParser - JSONæ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JsonOutputParser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JsonOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚ç”¨ï¼šéœ€è¦ç»“æ„åŒ–æ•°æ®ï¼Œä½†ä¸éœ€è¦ç±»å‹éªŒè¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. PydanticOutputParser - æ¨èï¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PydanticOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydantic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    summary: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    score: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PydanticOutputParser(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pydantic_object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚ç”¨ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - éœ€è¦ä¸¥æ ¼çš„æ•°æ®ç±»å‹éªŒè¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - éœ€è¦è‡ªåŠ¨ç”ŸæˆJSON Schema</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - éœ€è¦æ›´å¥½çš„é”™è¯¯æç¤º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. CommaSeparatedListOutputParser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.output_parsers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CommaSeparatedListOutputParser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CommaSeparatedListOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚ç”¨ï¼šéœ€è¦åˆ—è¡¨è¾“å‡ºï¼ˆå¦‚ï¼šè‹¹æœ,é¦™è•‰,æ©™å­ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‰æ‹©å»ºè®®ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€å•æ–‡æœ¬ â†’ StrOutputParser</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€å•JSON â†’ JsonOutputParser</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”Ÿäº§ç¯å¢ƒ â†’ PydanticOutputParserï¼ˆç±»å‹å®‰å…¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ—è¡¨æ•°æ® â†’ CommaSeparatedListOutputParser</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="q6-å¦‚ä½•å®ç°æ¡ä»¶åˆ†æ”¯çš„-chain" tabindex="-1">Q6: å¦‚ä½•å®ç°æ¡ä»¶åˆ†æ”¯çš„ Chainï¼Ÿ <a class="header-anchor" href="#q6-å¦‚ä½•å®ç°æ¡ä»¶åˆ†æ”¯çš„-chain" aria-label="Permalink to &quot;Q6: å¦‚ä½•å®ç°æ¡ä»¶åˆ†æ”¯çš„ Chainï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.runnables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnableBranch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰ä¸åŒçš„åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_template(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†™</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{language}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ä»£ç ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_template(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†™æ–‡æœ¬ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">general_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatPromptTemplate.from_template(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å›ç­”ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{input}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®šä¹‰è·¯ç”±é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">branch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnableBranch(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»£ç &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], code_chain),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–‡æœ¬&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], text_chain),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    general_chain  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é»˜è®¤åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> branch.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†™Pythonä»£ç å®ç°å¿«é€Ÿæ’åº&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼šè·¯ç”±åˆ°code_chain</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰è·¯ç”±å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(inputs):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inputs[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lower()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä»£ç &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ç¼–ç¨‹&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;code&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    elif</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ–‡ç« &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ–‡æ¡ˆ&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;text&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;general&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»“åˆRunnableLambda</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.runnables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnableLambda</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnableLambda(route_func).bind(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code_chain,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text_chain,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    general</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">general_chain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="q7-å¦‚ä½•è°ƒè¯•-chain-çœ‹åˆ°ä¸­é—´æ­¥éª¤" tabindex="-1">Q7: å¦‚ä½•è°ƒè¯• Chainï¼Ÿçœ‹åˆ°ä¸­é—´æ­¥éª¤ï¼Ÿ <a class="header-anchor" href="#q7-å¦‚ä½•è°ƒè¯•-chain-çœ‹åˆ°ä¸­é—´æ­¥éª¤" aria-label="Permalink to &quot;Q7: å¦‚ä½•è°ƒè¯• Chainï¼Ÿçœ‹åˆ°ä¸­é—´æ­¥éª¤ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•1ï¼šä½¿ç”¨verbose=True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.chains </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationChain(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    verbose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ‰“å°è¯¦ç»†æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•2ï¼šä½¿ç”¨å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.callbacks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StdOutCallbackHandler</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">handler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StdOutCallbackHandler()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;callbacks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [handler]}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•3ï¼šä½¿ç”¨RunnablePassthroughæŸ¥çœ‹ä¸­é—´å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.runnables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnablePassthrough</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">debug_chain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    RunnablePassthrough.assign(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        prompt_content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ“ Prompt: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnablePassthrough.assign(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        llm_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ¤– LLM Output: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrOutputParser()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•4ï¼šä½¿ç”¨debugå…¨å±€è°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.globals </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">debug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¼€å¯å…¨å±€è°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æµ‹è¯•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">debug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å…³é—­è°ƒè¯•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•5ï¼šä½¿ç”¨get_graph()å¯è§†åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain.get_graph().print_ascii()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¼šæ‰“å°å‡ºChainçš„ç»“æ„å›¾</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="q8-memory-ä¼šå ç”¨å¾ˆå¤š-token-å—-å¦‚ä½•ä¼˜åŒ–" tabindex="-1">Q8: Memory ä¼šå ç”¨å¾ˆå¤š Token å—ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿ <a class="header-anchor" href="#q8-memory-ä¼šå ç”¨å¾ˆå¤š-token-å—-å¦‚ä½•ä¼˜åŒ–" aria-label="Permalink to &quot;Q8: Memory ä¼šå ç”¨å¾ˆå¤š Token å—ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é—®é¢˜ï¼šMemoryä¼šç´¯ç§¯å†å²ï¼Œå¯¼è‡´Tokenè¶Šæ¥è¶Šå¤š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ä¼˜åŒ–ç­–ç•¥ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨WindowMemoryé™åˆ¶é•¿åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferWindowMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferWindowMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªä¿ç•™æœ€è¿‘3è½®å¯¹è¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. ä½¿ç”¨SummaryMemoryå‹ç¼©å†å²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationSummaryMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationSummaryMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_token_limit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¶…è¿‡500 tokenå°±è‡ªåŠ¨æ‘˜è¦</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. ç»“åˆä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CombinedMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buffer_memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationBufferWindowMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">summary_memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationSummaryMemory(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CombinedMemory(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    memories</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[buffer_memory, summary_memory]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. å®šæœŸæ¸…ç†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¿å­˜é‡è¦ä¿¡æ¯åˆ°è‡ªå®šä¹‰å­˜å‚¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> compress_memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(memory):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æå–å…³é”®ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> memory.load_memory_variables({})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å­˜å‚¨åˆ°æ•°æ®åº“/æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    save_to_db(history)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ¸…ç©ºMemory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    memory.clear()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. ä½¿ç”¨TokenBufferè‡ªåŠ¨é™åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationTokenBufferMemory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConversationTokenBufferMemory(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    llm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    max_token_limit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # è¶…è¿‡1000å°±è‡ªåŠ¨åˆ é™¤æ—§å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‰æ‹©å»ºè®®ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> çŸ­å¯¹è¯ â†’ BufferMemory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> é•¿å¯¹è¯ â†’ SummaryMemory æˆ– WindowMemory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æˆæœ¬æ•æ„Ÿ â†’ TokenBuffer æˆ–å®šæœŸæ¸…ç†</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="q9-å¦‚ä½•å¤„ç†-api-è°ƒç”¨å¤±è´¥çš„æƒ…å†µ" tabindex="-1">Q9: å¦‚ä½•å¤„ç† API è°ƒç”¨å¤±è´¥çš„æƒ…å†µï¼Ÿ <a class="header-anchor" href="#q9-å¦‚ä½•å¤„ç†-api-è°ƒç”¨å¤±è´¥çš„æƒ…å†µ" aria-label="Permalink to &quot;Q9: å¦‚ä½•å¤„ç† API è°ƒç”¨å¤±è´¥çš„æƒ…å†µï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•1ï¼šä½¿ç”¨tenacityè‡ªåŠ¨é‡è¯•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenacity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retry, stop_after_attempt, wait_exponential</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@retry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    stop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stop_after_attempt(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœ€å¤šé‡è¯•3æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    wait</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wait_exponential(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">min</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡æ•°é€€é¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> invoke_with_retry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chain, inputs):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(inputs)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•2ï¼šä½¿ç”¨try-exceptåŒ…è£¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> safe_invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chain, inputs, fallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†é—®é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.invoke(inputs)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é”™è¯¯ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fallback</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•3ï¼šä½¿ç”¨RunnableParallelçš„fallback</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.runnables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RunnableParallel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain_with_fallback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).with_fallbacks(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [backup_llm],  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¤‡ç”¨æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    exceptions_to_handle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ–¹æ³•4ï¼šä½¿ç”¨å›è°ƒç›‘æ§é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.callbacks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseCallbackHandler</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ErrorHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseCallbackHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> on_llm_error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, error, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kwargs):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LLMé”™è¯¯: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è®°å½•æ—¥å¿—ã€å‘é€é€šçŸ¥ç­‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain.invoke(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æµ‹è¯•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;callbacks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [ErrorHandler()]}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="q10-langchain-å’Œ-llamaindex-æœ‰ä»€ä¹ˆåŒºåˆ«-å¦‚ä½•é€‰æ‹©" tabindex="-1">Q10: LangChain å’Œ LlamaIndex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ <a class="header-anchor" href="#q10-langchain-å’Œ-llamaindex-æœ‰ä»€ä¹ˆåŒºåˆ«-å¦‚ä½•é€‰æ‹©" aria-label="Permalink to &quot;Q10: LangChain å’Œ LlamaIndex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ&quot;">â€‹</a></h3><p><strong>A:</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LangChain vs LlamaIndex å¯¹æ¯”ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚   ç‰¹æ€§      â”‚   LangChain      â”‚   LlamaIndex     â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚ å®šä½        â”‚ å…¨èƒ½LLMåº”ç”¨æ¡†æ¶  â”‚ ä¸“æ³¨äºRAG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ•°æ®ç´¢å¼•â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚ æ“…é•¿        â”‚ Agent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Chain      â”‚ æ–‡æ¡£æ£€ç´¢</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">é—®ç­”    â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚ å­¦ä¹ æ›²çº¿    â”‚ ä¸­ç­‰             â”‚ è¾ƒä½             â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚ çµæ´»æ€§      â”‚ å¾ˆé«˜             â”‚ ä¸­ç­‰             â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚ æ–‡æ¡£è´¨é‡    â”‚ ä¼˜ç§€             â”‚ ä¼˜ç§€             â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚ ç¤¾åŒº        â”‚ åºå¤§             â”‚ æ´»è·ƒ             â”‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ä½¿ç”¨ LangChain çš„åœºæ™¯ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> éœ€è¦æ„å»ºAgent</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¤æ‚çš„å·¥ä½œæµï¼ˆå¤šæ­¥Chainï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> éœ€è¦å¤šç§å·¥å…·é›†æˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> éœ€è¦çµæ´»æ§åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ä¼ä¸šçº§åº”ç”¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ç¤ºä¾‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AIå®¢æœç³»ç»Ÿ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ä»£ç ç”Ÿæˆå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è‡ªåŠ¨åŒ–Agent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… ä½¿ç”¨ LlamaIndex çš„åœºæ™¯ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ä¸“æ³¨äºæ–‡æ¡£é—®ç­”ï¼ˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RAG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æ•°æ®ç´¢å¼•å’Œæ£€ç´¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> çŸ¥è¯†åº“æ„å»º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¿«é€ŸåŸå‹å¼€å‘</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ç¤ºä¾‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æŠ€æœ¯æ–‡æ¡£é—®ç­”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ä¼ä¸šçŸ¥è¯†åº“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è®ºæ–‡æ£€ç´¢ç³»ç»Ÿ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LangChainå¤„ç†Agenté€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LlamaIndexå¤„ç†æ•°æ®æ£€ç´¢</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llama_index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VectorStoreIndex</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain.agents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AgentExecutor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨LlamaIndexæ„å»ºç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VectorStoreIndex.from_documents(docs)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨LangChainæ„å»ºAgent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AgentExecutor(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    agent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    tools</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[index.as_tool()]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><hr><h2 id="å­¦ä¹ æ¸…å•" tabindex="-1">å­¦ä¹ æ¸…å• <a class="header-anchor" href="#å­¦ä¹ æ¸…å•" aria-label="Permalink to &quot;å­¦ä¹ æ¸…å•&quot;">â€‹</a></h2><p>æ£€æŸ¥ä½ æŒæ¡äº†ä»¥ä¸‹æŠ€èƒ½ï¼š</p><h3 id="åŸºç¡€æ¦‚å¿µ-âœ…" tabindex="-1">åŸºç¡€æ¦‚å¿µ âœ… <a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ-âœ…" aria-label="Permalink to &quot;åŸºç¡€æ¦‚å¿µ âœ…&quot;">â€‹</a></h3><ul><li>[ ] ç†è§£LangChainçš„å…­å¤§æ ¸å¿ƒæ¨¡å—</li><li>[ ] çŸ¥é“LangChainè§£å†³äº†å“ªäº›é—®é¢˜</li><li>[ ] èƒ½å¤Ÿå®‰è£…å’Œé…ç½®LangChainç¯å¢ƒ</li><li>[ ] ç†è§£Model I/Oã€Chainsã€Memoryçš„ä½œç”¨</li></ul><h3 id="model-i-o-âœ…" tabindex="-1">Model I/O âœ… <a class="header-anchor" href="#model-i-o-âœ…" aria-label="Permalink to &quot;Model I/O âœ…&quot;">â€‹</a></h3><ul><li>[ ] ä¼šä½¿ç”¨ChatOpenAIè°ƒç”¨æ¨¡å‹</li><li>[ ] ç†è§£ä¸åŒMessageç±»å‹çš„ä½œç”¨</li><li>[ ] ä¼šåˆ›å»ºChatPromptTemplateæ¨¡æ¿</li><li>[ ] ä¼šä½¿ç”¨PromptTemplateç®¡ç†æç¤ºè¯</li><li>[ ] ä¼šä½¿ç”¨StrOutputParserè§£ææ–‡æœ¬</li><li>[ ] ä¼šä½¿ç”¨JsonOutputParserè§£æJSON</li><li>[ ] ä¼šä½¿ç”¨PydanticOutputParserè¿›è¡Œç±»å‹å®‰å…¨è§£æ</li></ul><h3 id="chains-âœ…" tabindex="-1">Chains âœ… <a class="header-anchor" href="#chains-âœ…" aria-label="Permalink to &quot;Chains âœ…&quot;">â€‹</a></h3><ul><li>[ ] ç†è§£Chainçš„æ¦‚å¿µå’Œä½œç”¨</li><li>[ ] ä¼šåˆ›å»ºLLMChainåŸºç¡€é“¾</li><li>[ ] ä¼šä½¿ç”¨SequentialChainä¸²è”å¤šä¸ªæ­¥éª¤</li><li>[ ] ç†è§£å¹¶ä¼šä½¿ç”¨LCELè¯­æ³•ï¼ˆ| æ“ä½œç¬¦ï¼‰</li><li>[ ] ä¼šä½¿ç”¨RunnablePassthroughå¤„ç†æ•°æ®</li><li>[ ] ä¼šåˆ›å»ºRouterChainå®ç°æ¡ä»¶åˆ†æ”¯</li><li>[ ] èƒ½å¤Ÿæ„å»ºå¤æ‚çš„Chainå·¥ä½œæµ</li></ul><h3 id="memory-âœ…" tabindex="-1">Memory âœ… <a class="header-anchor" href="#memory-âœ…" aria-label="Permalink to &quot;Memory âœ…&quot;">â€‹</a></h3><ul><li>[ ] ç†è§£Memoryçš„å¿…è¦æ€§</li><li>[ ] ä¼šä½¿ç”¨ConversationBufferMemoryä¿å­˜å®Œæ•´å¯¹è¯</li><li>[ ] ä¼šä½¿ç”¨ConversationBufferWindowMemoryé™åˆ¶é•¿åº¦</li><li>[ ] ä¼šä½¿ç”¨ConversationSummaryMemoryå‹ç¼©å†å²</li><li>[ ] çŸ¥é“ä¸åŒMemoryç±»å‹çš„é€‚ç”¨åœºæ™¯</li><li>[ ] ä¼šåœ¨LCELä¸­ä½¿ç”¨Memory</li><li>[ ] ä¼šä¿å­˜å’ŒåŠ è½½Memory</li></ul><h3 id="å®æˆ˜èƒ½åŠ›-âœ…" tabindex="-1">å®æˆ˜èƒ½åŠ› âœ… <a class="header-anchor" href="#å®æˆ˜èƒ½åŠ›-âœ…" aria-label="Permalink to &quot;å®æˆ˜èƒ½åŠ› âœ…&quot;">â€‹</a></h3><ul><li>[ ] èƒ½å¤Ÿç‹¬ç«‹æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿ</li><li>[ ] èƒ½å¤Ÿå®ç°å¤šè½®å¯¹è¯</li><li>[ ] èƒ½å¤Ÿå¤„ç†APIè°ƒç”¨å¤±è´¥</li><li>[ ] çŸ¥é“å¦‚ä½•è°ƒè¯•Chain</li><li>[ ] ç†è§£Tokenæˆæœ¬ä¼˜åŒ–æ–¹æ³•</li><li>[ ] èƒ½å¤Ÿè®¾è®¡åˆç†çš„æç¤ºè¯æ¨¡æ¿</li></ul><h3 id="æœ€ä½³å®è·µ-âœ…" tabindex="-1">æœ€ä½³å®è·µ âœ… <a class="header-anchor" href="#æœ€ä½³å®è·µ-âœ…" aria-label="Permalink to &quot;æœ€ä½³å®è·µ âœ…&quot;">â€‹</a></h3><ul><li>[ ] çŸ¥é“å¦‚ä½•ç»„ç»‡æç¤ºè¯æ¨¡æ¿</li><li>[ ] ç†è§£é”™è¯¯å¤„ç†å’Œé‡è¯•ç­–ç•¥</li><li>[ ] ä¼šä½¿ç”¨ç¼“å­˜ä¼˜åŒ–æˆæœ¬</li><li>[ ] çŸ¥é“å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ¨¡å‹</li><li>[ ] ç†è§£LCEL vs ä¼ ç»ŸChainçš„åŒºåˆ«</li><li>[ ] èƒ½å¤Ÿé˜…è¯»å’Œç†è§£LangChainæ–‡æ¡£</li></ul><hr><h2 id="æ‹“å±•ç»ƒä¹ " tabindex="-1">æ‹“å±•ç»ƒä¹  <a class="header-anchor" href="#æ‹“å±•ç»ƒä¹ " aria-label="Permalink to &quot;æ‹“å±•ç»ƒä¹ &quot;">â€‹</a></h2><h3 id="ç»ƒä¹ 1-æ„å»ºå¤šè§’è‰²å¯¹è¯ç³»ç»Ÿ" tabindex="-1">ç»ƒä¹ 1ï¼šæ„å»ºå¤šè§’è‰²å¯¹è¯ç³»ç»Ÿ <a class="header-anchor" href="#ç»ƒä¹ 1-æ„å»ºå¤šè§’è‰²å¯¹è¯ç³»ç»Ÿ" aria-label="Permalink to &quot;ç»ƒä¹ 1ï¼šæ„å»ºå¤šè§’è‰²å¯¹è¯ç³»ç»Ÿ&quot;">â€‹</a></h3><p><strong>è¦æ±‚</strong>ï¼š</p><ul><li>å®ç°3ä¸ªä¸åŒæ€§æ ¼çš„AIè§’è‰²</li><li>ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸å“ªä¸ªè§’è‰²å¯¹è¯</li><li>æ¯ä¸ªè§’è‰²æœ‰ç‹¬ç«‹çš„Memory</li><li>è§’è‰²ä¹‹é—´å¯ä»¥ç›¸äº’å¼•ç”¨</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æç¤ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä¸ºæ¯ä¸ªè§’è‰²åˆ›å»ºç‹¬ç«‹çš„Chainå’ŒMemory</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. ä½¿ç”¨RouterChainæ ¹æ®ç”¨æˆ·é€‰æ‹©è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. åœ¨æç¤ºè¯ä¸­å®šä¹‰è§’è‰²ç‰¹ç‚¹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ç»ƒä¹ 2-å®ç°å¸¦çŸ¥è¯†åº“çš„é—®ç­”ç³»ç»Ÿ" tabindex="-1">ç»ƒä¹ 2ï¼šå®ç°å¸¦çŸ¥è¯†åº“çš„é—®ç­”ç³»ç»Ÿ <a class="header-anchor" href="#ç»ƒä¹ 2-å®ç°å¸¦çŸ¥è¯†åº“çš„é—®ç­”ç³»ç»Ÿ" aria-label="Permalink to &quot;ç»ƒä¹ 2ï¼šå®ç°å¸¦çŸ¥è¯†åº“çš„é—®ç­”ç³»ç»Ÿ&quot;">â€‹</a></h3><p><strong>è¦æ±‚</strong>ï¼š</p><ul><li>ç»´æŠ¤ä¸€ä¸ªçŸ¥è¯†å­—å…¸ï¼ˆå¦‚ï¼šè¯¾ç¨‹ä¿¡æ¯ã€FAQï¼‰</li><li>ç”¨æˆ·æé—®æ—¶å…ˆæŸ¥çŸ¥è¯†åº“</li><li>çŸ¥è¯†åº“æ²¡æœ‰ç­”æ¡ˆå†ç”¨LLMå›ç­”</li><li>è®°å½•æ‰€æœ‰é—®ç­”å†å²</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æç¤ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨RouterChainå®ç°é€»è¾‘åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼šæŸ¥çŸ¥è¯†åº“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. ç¬¬äºŒä¸ªåˆ†æ”¯ï¼šLLMå›ç­”</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. ä½¿ç”¨Memoryä¿å­˜å†å²</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ç»ƒä¹ 3-æ„å»ºä»£ç å®¡æŸ¥åŠ©æ‰‹" tabindex="-1">ç»ƒä¹ 3ï¼šæ„å»ºä»£ç å®¡æŸ¥åŠ©æ‰‹ <a class="header-anchor" href="#ç»ƒä¹ 3-æ„å»ºä»£ç å®¡æŸ¥åŠ©æ‰‹" aria-label="Permalink to &quot;ç»ƒä¹ 3ï¼šæ„å»ºä»£ç å®¡æŸ¥åŠ©æ‰‹&quot;">â€‹</a></h3><p><strong>è¦æ±‚</strong>ï¼š</p><ul><li>æ¥æ”¶ä»£ç å’Œé—®é¢˜æè¿°</li><li>é€æ­¥åˆ†æä»£ç é—®é¢˜</li><li>ç»™å‡ºä¿®æ”¹å»ºè®®å’Œç¤ºä¾‹</li><li>æ”¯æŒå¤šè½®å¯¹è¯è¿½é—®</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æç¤ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨SequentialChainåˆ†æ­¥éª¤åˆ†æ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. æ­¥éª¤1ï¼šç†è§£ä»£ç ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ­¥éª¤2ï¼šè¯†åˆ«é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. æ­¥éª¤3ï¼šç”Ÿæˆå»ºè®®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. ä½¿ç”¨Memoryæ”¯æŒè¿½é—®</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ç»ƒä¹ 4-å®ç°å¤šè¯­è¨€ç¿»è¯‘ç³»ç»Ÿ" tabindex="-1">ç»ƒä¹ 4ï¼šå®ç°å¤šè¯­è¨€ç¿»è¯‘ç³»ç»Ÿ <a class="header-anchor" href="#ç»ƒä¹ 4-å®ç°å¤šè¯­è¨€ç¿»è¯‘ç³»ç»Ÿ" aria-label="Permalink to &quot;ç»ƒä¹ 4ï¼šå®ç°å¤šè¯­è¨€ç¿»è¯‘ç³»ç»Ÿ&quot;">â€‹</a></h3><p><strong>è¦æ±‚</strong>ï¼š</p><ul><li>æ”¯æŒä¸­è‹±æ—¥éŸ©å››ç§è¯­è¨€äº’è¯‘</li><li>è‡ªåŠ¨æ£€æµ‹æºè¯­è¨€</li><li>ä¿æŒä¸Šä¸‹æ–‡ä¸€è‡´æ€§</li><li>å¯ä»¥è°ƒæ•´ç¿»è¯‘é£æ ¼ï¼ˆæ­£å¼/å£è¯­ï¼‰</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æç¤ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨RouterChainæ ¹æ®ç›®æ ‡è¯­è¨€é€‰æ‹©</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. æç¤ºè¯ä¸­å®šä¹‰è¯­è¨€ç‰¹å¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. ä½¿ç”¨Memoryä¿æŒç¿»è¯‘ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. æ·»åŠ é£æ ¼å‚æ•°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ç»ƒä¹ 5-æ„å»ºå­¦ä¹ è¿›åº¦è¿½è¸ªç³»ç»Ÿ" tabindex="-1">ç»ƒä¹ 5ï¼šæ„å»ºå­¦ä¹ è¿›åº¦è¿½è¸ªç³»ç»Ÿ <a class="header-anchor" href="#ç»ƒä¹ 5-æ„å»ºå­¦ä¹ è¿›åº¦è¿½è¸ªç³»ç»Ÿ" aria-label="Permalink to &quot;ç»ƒä¹ 5ï¼šæ„å»ºå­¦ä¹ è¿›åº¦è¿½è¸ªç³»ç»Ÿ&quot;">â€‹</a></h3><p><strong>è¦æ±‚</strong>ï¼š</p><ul><li>è®°å½•ç”¨æˆ·å­¦ä¹ è¿‡çš„ä¸»é¢˜</li><li>æ ¹æ®å†å²è°ƒæ•´å›ç­”æ·±åº¦</li><li>ç”Ÿæˆä¸ªæ€§åŒ–çš„å­¦ä¹ å»ºè®®</li><li>æä¾›ç›¸å…³ç»ƒä¹ é¢˜</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æç¤ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨SummaryMemoryæ€»ç»“å­¦ä¹ å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. åœ¨æç¤ºè¯ä¸­æ³¨å…¥å­¦ä¹ å†å²</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. æ ¹æ®ç”¨æˆ·æ°´å¹³è°ƒæ•´æç¤ºè¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. ä½¿ç”¨Chainç”Ÿæˆç»ƒä¹ é¢˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="è¿›é˜¶å­¦ä¹ æ–¹å‘" tabindex="-1">è¿›é˜¶å­¦ä¹ æ–¹å‘ <a class="header-anchor" href="#è¿›é˜¶å­¦ä¹ æ–¹å‘" aria-label="Permalink to &quot;è¿›é˜¶å­¦ä¹ æ–¹å‘&quot;">â€‹</a></h2><p>æ­å–œä½ å®Œæˆ LangChain åŸºç¡€å­¦ä¹ ï¼æ¥ä¸‹æ¥å¯ä»¥ï¼š</p><h3 id="_1-æ·±å…¥-langchain" tabindex="-1">1. æ·±å…¥ LangChain <a class="header-anchor" href="#_1-æ·±å…¥-langchain" aria-label="Permalink to &quot;1. æ·±å…¥ LangChain&quot;">â€‹</a></h3><p><strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong>ï¼š</p><ul><li>Document Loadersï¼šåŠ è½½å„ç§æ–‡æ¡£</li><li>Text Splittersï¼šæ™ºèƒ½åˆ†å‰²æ–‡æœ¬</li><li>Vector Storesï¼šå‘é‡æ•°æ®åº“</li><li>Retrieversï¼šæ£€ç´¢å™¨</li></ul><p><strong>Agentsï¼ˆæ™ºèƒ½ä»£ç†ï¼‰</strong>ï¼š</p><ul><li>Toolsï¼šè‡ªå®šä¹‰å·¥å…·</li><li>Agent Typesï¼šReActã€Self-Ask</li><li>Agent Executorsï¼šæ‰§è¡Œå™¨</li><li>è®¡åˆ’å’Œæ¨ç†</li></ul><p><strong>LangChain ç”Ÿæ€</strong>ï¼š</p><ul><li>LangServeï¼šéƒ¨ç½²æœåŠ¡</li><li>LangSmithï¼šè°ƒè¯•å’Œç›‘æ§</li><li>Templatesï¼šé¢„åˆ¶æ¨¡æ¿</li></ul><h3 id="_2-å®è·µé¡¹ç›®" tabindex="-1">2. å®è·µé¡¹ç›® <a class="header-anchor" href="#_2-å®è·µé¡¹ç›®" aria-label="Permalink to &quot;2. å®è·µé¡¹ç›®&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">âœ…</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> åŠ¨æ‰‹å®è·µï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> æ„å»ºä¸ªäººçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å¼€å‘AIå®¢æœæœºå™¨äºº</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> åˆ›å»ºä»£ç åŠ©æ‰‹Agent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å®ç°æ–‡æ¡£åˆ†æå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">5.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å¼€å‘è‡ªåŠ¨åŒ–å·¥ä½œæµ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-å­¦ä¹ èµ„æº" tabindex="-1">3. å­¦ä¹ èµ„æº <a class="header-anchor" href="#_3-å­¦ä¹ èµ„æº" aria-label="Permalink to &quot;3. å­¦ä¹ èµ„æº&quot;">â€‹</a></h3><ul><li><strong>LangChain å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://python.langchain.com" target="_blank" rel="noreferrer">https://python.langchain.com</a></li><li><strong>LangChain GitHub</strong>ï¼š<a href="https://github.com/langchain-ai/langchain" target="_blank" rel="noreferrer">https://github.com/langchain-ai/langchain</a></li><li><strong>LangSmith</strong>ï¼š<a href="https://smith.langchain.com" target="_blank" rel="noreferrer">https://smith.langchain.com</a>ï¼ˆè°ƒè¯•å¹³å°ï¼‰</li><li><strong>ç¤ºä¾‹é¡¹ç›®</strong>ï¼š<a href="https://github.com/langchain-ai/langchain/tree/master/cookbook" target="_blank" rel="noreferrer">https://github.com/langchain-ai/langchain/tree/master/cookbook</a></li></ul><h3 id="_4-ç¤¾åŒºå’Œèµ„è®¯" tabindex="-1">4. ç¤¾åŒºå’Œèµ„è®¯ <a class="header-anchor" href="#_4-ç¤¾åŒºå’Œèµ„è®¯" aria-label="Permalink to &quot;4. ç¤¾åŒºå’Œèµ„è®¯&quot;">â€‹</a></h3><ul><li><strong>Discord ç¤¾åŒº</strong>ï¼šåŠ å…¥ LangChain Discord</li><li><strong>Twitter</strong>ï¼šå…³æ³¨ @langchainai</li><li><strong>ä¸­æ–‡ç¤¾åŒº</strong>ï¼šå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ä¸“æ </li><li><strong>å®æˆ˜æ¡ˆä¾‹</strong>ï¼šå­¦ä¹ å¼€æºé¡¹ç›®</li></ul><h3 id="_5-æœ€ä½³å®è·µ" tabindex="-1">5. æœ€ä½³å®è·µ <a class="header-anchor" href="#_5-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;5. æœ€ä½³å®è·µ&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">âœ… å¼€å‘å»ºè®®ï¼š</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚åº¦</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. é‡è§†æç¤ºè¯è®¾è®¡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. ä½¿ç”¨ Memory ç®¡ç†å¯¹è¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. å–„ç”¨ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LCEL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ç®€åŒ–ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. æ³¨æ„ Token æˆæœ¬ä¼˜åŒ–</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. åšå¥½é”™è¯¯å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. ä½¿ç”¨ LangSmith è°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. ç¼–å†™æµ‹è¯•ä¿è¯è´¨é‡</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>ä¸‹ä¸€ç« é¢„å‘Š</strong>ï¼šPrompt Engineering - æŒæ¡æç¤ºè¯çš„é«˜çº§æŠ€å·§ï¼</p><hr><p><strong>é‡åˆ°é—®é¢˜ï¼Ÿ</strong></p><ul><li>æŸ¥çœ‹ä»£ç ç¤ºä¾‹ï¼š<code>examples/</code> ç›®å½•</li><li>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://python.langchain.com" target="_blank" rel="noreferrer">https://python.langchain.com</a></li><li>å‘é‚®ä»¶æ±‚åŠ©ï¼šesimonx@163.com</li></ul><p><strong>ä¸‹ä¸€ç« ï¼š<a href="./chapter-03.html">Prompt Engineering â†’</a></strong></p></div></div></main><footer class="VPDocFooter" data-v-a22668dc data-v-deb39fa6><!--[--><!--]--><div class="edit-info" data-v-deb39fa6><!----><div class="last-updated" data-v-deb39fa6><p class="VPLastUpdated" data-v-deb39fa6 data-v-0b734e03>æœ€åæ›´æ–°: <time datetime="2026-02-04T16:38:38.000Z" data-v-0b734e03></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-deb39fa6><span class="visually-hidden" id="doc-footer-aria-label" data-v-deb39fa6>Pager</span><div class="pager" data-v-deb39fa6><a class="VPLink link pager-link prev" href="/simonProjectGuide/ai/chapter-01.html" data-v-deb39fa6><!--[--><span class="desc" data-v-deb39fa6>ä¸Šä¸€ç« </span><span class="title" data-v-deb39fa6>ç¬¬3ç« ï¼šAIåº”ç”¨åŸºç¡€</span><!--]--></a></div><div class="pager" data-v-deb39fa6><a class="VPLink link pager-link next" href="/simonProjectGuide/ai/chapter-03.html" data-v-deb39fa6><!--[--><span class="desc" data-v-deb39fa6>ä¸‹ä¸€ç« </span><span class="title" data-v-deb39fa6>ç¬¬5ç« ï¼šPromptå·¥ç¨‹</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a929ecdd data-v-4f922eff><div class="container" data-v-4f922eff><p class="message" data-v-4f922eff>åŸºäº MIT è®¸å¯å‘å¸ƒ</p><p class="copyright" data-v-4f922eff>Â© Simon å°å¾ 2026 | é‚®ç®±: esimonx@163.com</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"ai_chapter-00.md\":\"BqX4lUnn\",\"ai_chapter-01.md\":\"BZpEvK0O\",\"ai_chapter-02.md\":\"CGR827nK\",\"ai_chapter-03.md\":\"DzwK0nu0\",\"ai_chapter-04.md\":\"7GIt7dat\",\"ai_chapter-05.md\":\"CpTs6Si0\",\"ai_chapter-06.md\":\"DntEFKnR\",\"ai_chapter-07.md\":\"CNpFQnzI\",\"ai_index.md\":\"COWLiXQa\",\"ai_tools-setup.md\":\"CtVopcRH\",\"git_chapter-01.md\":\"BZf8FeHe\",\"git_chapter-02.md\":\"DplRXGLx\",\"git_chapter-03.md\":\"Cke9X_uL\",\"git_chapter-05.md\":\"BU3I2xNy\",\"git_index.md\":\"BN0O07CC\",\"git_workflow.md\":\"-Smn693x\",\"guide_appendix-checklist.md\":\"CDxQ_hLu\",\"guide_appendix-projects.md\":\"BpozOaby\",\"guide_appendix-resources.md\":\"CjParQVx\",\"guide_appendix-templates.md\":\"Ekf0g6YC\",\"guide_appendix-vscode.md\":\"BHFGl35p\",\"guide_chapter-00.md\":\"ChcAHEIK\",\"guide_chapter-01.md\":\"sGpj2kAU\",\"guide_chapter-02.md\":\"CuxNbFla\",\"guide_chapter-03.md\":\"uW_tZaf4\",\"guide_chapter-04.md\":\"J1l8yTvX\",\"guide_chapter-05.md\":\"ME2KvkxV\",\"guide_chapter-06.md\":\"BPbQgAe1\",\"guide_chapter-07.md\":\"0OPczge2\",\"guide_chapter-08.md\":\"CFUnC5Z8\",\"guide_chapter-09.md\":\"B072KZKJ\",\"guide_chapter-10.md\":\"lb4v89E5\",\"guide_chapter-11.md\":\"DrLqpb3E\",\"guide_chapter-12.md\":\"BI6bJ8Ev\",\"guide_chapter-13.md\":\"C6Ee8Q9m\",\"guide_chapter-14-advanced.md\":\"CboYv1Uj\",\"guide_chapter-14.md\":\"CwzZCNCz\",\"guide_chapter-15.md\":\"BF9iplnG\",\"guide_chapter-16-advanced.md\":\"3IfS1OOy\",\"guide_chapter-16.md\":\"Be0-4sNv\",\"guide_chapter-17.md\":\"BIAL0gQD\",\"guide_chapter-18-advanced.md\":\"CGEb1d73\",\"guide_chapter-18.md\":\"DrCDnK_p\",\"guide_chapter-19.md\":\"DXDCSqU3\",\"guide_chapter-20.md\":\"8DM6tXU_\",\"guide_chapter-21.md\":\"D0QHQ4mH\",\"guide_chapter-22.md\":\"rbyWVK47\",\"guide_chapter-23.md\":\"DeFBV5oc\",\"guide_chapter-24.md\":\"wdgY324s\",\"guide_chapter-25.md\":\"BUxgGUPH\",\"guide_chapter-26.md\":\"BLopEy8X\",\"guide_chapter-27.md\":\"NldE4Y-_\",\"guide_chapter-28.md\":\"B0-jTLl4\",\"guide_chapter-29.md\":\"Izr7GQny\",\"guide_chapter-30.md\":\"C9TeNQIb\",\"guide_chapter-31.md\":\"Cu8gCI5_\",\"guide_chapter-32.md\":\"D4pEPzbM\",\"guide_chapter-33.md\":\"CC1Q_BoR\",\"guide_chapter-34.md\":\"DeibsnrT\",\"guide_chapter-35.md\":\"Ck2KNduX\",\"guide_chapter-36.md\":\"TS7Sqczy\",\"guide_chapter-37.md\":\"D0Ni79Gg\",\"guide_chapter-38.md\":\"DSTIHN_Q\",\"guide_chapter-39.md\":\"Ch-C7h2h\",\"guide_chapter-40.md\":\"COyLsl4i\",\"guide_chapter-41.md\":\"Dv-amvIi\",\"guide_chapter-42.md\":\"NyGmRqkL\",\"guide_chapter-43.md\":\"DRrDh7S4\",\"guide_chapter-44.md\":\"CIHTRkHo\",\"guide_chapter-45.md\":\"2L75sAHN\",\"guide_chapter-46.md\":\"VS7-iLkP\",\"guide_chapter-47.md\":\"DeuVSQfb\",\"guide_index.md\":\"DyLglw1C\",\"index.md\":\"6jIxWKop\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"å°å¾çš„æŠ€æœ¯å……ç”µç«™\",\"description\":\"å°å¾æŠ€æœ¯å……ç”µç«™ - ä»é›¶åˆ°ä¼ä¸šçº§é¡¹ç›®å®æˆ˜\",\"base\":\"/simonProjectGuide/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"é¦–é¡µ\",\"link\":\"/\"},{\"text\":\"å‰ç«¯å¼€å‘\",\"items\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"link\":\"/guide/\"},{\"text\":\"åŸºç¡€å…¥é—¨\",\"link\":\"/guide/chapter-00\"},{\"text\":\"ç»„ä»¶å¼€å‘\",\"link\":\"/guide/chapter-09\"},{\"text\":\"ä¼ä¸šçº§å¼€å‘\",\"link\":\"/guide/chapter-16\"},{\"text\":\"è¿›é˜¶éƒ¨åˆ†\",\"link\":\"/guide/chapter-25\"},{\"text\":\"é«˜çº§æ‹“å±•\",\"link\":\"/guide/chapter-40\"},{\"text\":\"é™„å½•\",\"link\":\"/guide/appendix-projects\"}]},{\"text\":\"Git æ•™ç¨‹\",\"items\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"link\":\"/git/\"},{\"text\":\"åŸºç¡€å…¥é—¨\",\"link\":\"/git/chapter-01\"},{\"text\":\"è¿›é˜¶\",\"link\":\"/git/workflow\"}]},{\"text\":\"AI æ•™ç¨‹\",\"items\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"link\":\"/ai/\"},{\"text\":\"åŸºç¡€å…¥é—¨\",\"link\":\"/ai/chapter-00\"},{\"text\":\"è¿›é˜¶\",\"link\":\"/ai/chapter-03\"},{\"text\":\"æ‹“å±•\",\"link\":\"/ai/chapter-06\"}]}],\"sidebar\":{\"/git/\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"link\":\"/git/\"}]},{\"text\":\"åŸºç¡€å…¥é—¨\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬1ç« ï¼šGitåŸºç¡€å…¥é—¨\",\"link\":\"/git/chapter-01\"},{\"text\":\"ç¬¬2ç« ï¼šGitå¸¸ç”¨å‘½ä»¤\",\"link\":\"/git/chapter-02\"},{\"text\":\"ç¬¬3ç« ï¼šGitåˆ†æ”¯ç®¡ç†\",\"link\":\"/git/chapter-03\"}]},{\"text\":\"è¿›é˜¶\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬4ç« ï¼šGitå·¥ä½œæµç¨‹\",\"link\":\"/git/workflow\"},{\"text\":\"ç¬¬5ç« ï¼šGitå®æˆ˜æŠ€å·§\",\"link\":\"/git/chapter-05\"}]}],\"/ai/\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"link\":\"/ai/\"}]},{\"text\":\"åŸºç¡€å…¥é—¨\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬1ç« ï¼šAIè¾…åŠ©å¼€å‘\",\"link\":\"/ai/chapter-00\"},{\"text\":\"ç¬¬2ç« ï¼šå·¥å…·é…ç½®æŒ‡å—\",\"link\":\"/ai/tools-setup\"},{\"text\":\"ç¬¬3ç« ï¼šAIåº”ç”¨åŸºç¡€\",\"link\":\"/ai/chapter-01\"},{\"text\":\"ç¬¬4ç« ï¼šLangChainæ¡†æ¶\",\"link\":\"/ai/chapter-02\"}]},{\"text\":\"è¿›é˜¶\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬5ç« ï¼šPromptå·¥ç¨‹\",\"link\":\"/ai/chapter-03\",\"items\":[{\"text\":\"æ ¸å¿ƒåŸåˆ™\",\"link\":\"/ai/chapter-03#æ ¸å¿ƒåŸåˆ™\"},{\"text\":\"å¸¸ç”¨æç¤ºè¯æ¨¡å¼\",\"link\":\"/ai/chapter-03#å¸¸ç”¨æç¤ºè¯æ¨¡å¼\"},{\"text\":\"é«˜çº§æŠ€å·§\",\"link\":\"/ai/chapter-03#é«˜çº§æŠ€å·§\"}]},{\"text\":\"ç¬¬6ç« ï¼šRAGæ£€ç´¢å¢å¼º\",\"link\":\"/ai/chapter-04\"},{\"text\":\"ç¬¬7ç« ï¼šAI Agent\",\"link\":\"/ai/chapter-05\"}]},{\"text\":\"æ‹“å±•\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬8ç« ï¼šå®æˆ˜é¡¹ç›®\",\"link\":\"/ai/chapter-06\"},{\"text\":\"ç¬¬9ç« ï¼šåº”ç”¨è¿›é˜¶\",\"link\":\"/ai/chapter-07\",\"items\":[{\"text\":\"ä¸»æµLLMæ¨¡å‹\",\"link\":\"/ai/chapter-07#ä¸»æµllmæ¨¡å‹å¯¹æ¯”\"},{\"text\":\"Claude API\",\"link\":\"/ai/chapter-07#claude-apiä½¿ç”¨\"},{\"text\":\"æœ¬åœ°æ¨¡å‹éƒ¨ç½²\",\"link\":\"/ai/chapter-07#å¼€æºæ¨¡å‹å’Œæœ¬åœ°éƒ¨ç½²\"},{\"text\":\"Moltbotæ¡†æ¶\",\"link\":\"/ai/chapter-07#moltbotæ¡†æ¶\"},{\"text\":\"LangGraphæ¡†æ¶\",\"link\":\"/ai/chapter-07#langgraphå¤æ‚agentæ¡†æ¶\"},{\"text\":\"LangGraphå¸¸è§æ¨¡å¼\",\"link\":\"/ai/chapter-07#langgraph-å¸¸è§æ¨¡å¼\"},{\"text\":\"LangGraphå®æˆ˜é¡¹ç›®\",\"link\":\"/ai/chapter-07#å®æˆ˜é¡¹ç›®æ™ºèƒ½å†…å®¹ç”Ÿæˆç³»ç»Ÿ\"},{\"text\":\"åº”ç”¨è¯„ä¼°\",\"link\":\"/ai/chapter-07#aiåº”ç”¨è¯„ä¼°å’Œæµ‹è¯•\"}]}]}],\"/guide/\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"å­¦ä¹ è·¯çº¿\",\"link\":\"/guide/\"}]},{\"text\":\"åŸºç¡€å…¥é—¨\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬1ç« ï¼šAIè¾…åŠ©å‰ç«¯å¼€å‘\",\"link\":\"/guide/chapter-00\",\"items\":[{\"text\":\"ä¸ºä»€ä¹ˆå­¦ä¹  Vue3\",\"link\":\"/guide/chapter-00#ä¸ºä»€ä¹ˆå­¦ä¹ -vue3\"},{\"text\":\"å­¦ä¹ è·¯å¾„å›¾\",\"link\":\"/guide/chapter-00#å­¦ä¹ è·¯å¾„å›¾\"},{\"text\":\"AI è¾…åŠ©å¼€å‘\",\"link\":\"/guide/chapter-00#ä¸ºä»€ä¹ˆéœ€è¦-ai-è¾…åŠ©å¼€å‘\"}]},{\"text\":\"ç¬¬2ç« ï¼šJavaScriptæ ¸å¿ƒåŸºç¡€\",\"link\":\"/guide/chapter-01\",\"items\":[{\"text\":\"æ•°ç»„æ–¹æ³•å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-01#æ•°ç»„æ–¹æ³•å®Œå…¨æŒ‡å—\"},{\"text\":\"éå†æ–¹æ³•\",\"link\":\"/guide/chapter-01#éå†æ–¹æ³•\"},{\"text\":\"æŸ¥æ‰¾æ–¹æ³•\",\"link\":\"/guide/chapter-01#æŸ¥æ‰¾æ–¹æ³•\"}]},{\"text\":\"ç¬¬3ç« ï¼šVue3ç®€ä»‹ä¸ç¯å¢ƒæ­å»º\",\"link\":\"/guide/chapter-02\",\"items\":[{\"text\":\"ä»€ä¹ˆæ˜¯Vue3\",\"link\":\"/guide/chapter-02#ä»€ä¹ˆæ˜¯vue3\"},{\"text\":\"å¼€å‘ç¯å¢ƒæ­å»º\",\"link\":\"/guide/chapter-02#å¼€å‘ç¯å¢ƒæ­å»º\"},{\"text\":\"SFCå•æ–‡ä»¶ç»„ä»¶\",\"link\":\"/guide/chapter-02#sfcå•æ–‡ä»¶ç»„ä»¶\"}]},{\"text\":\"ç¬¬4ç« ï¼šESLintä»£ç æ£€æŸ¥\",\"link\":\"/guide/chapter-03\"},{\"text\":\"ç¬¬5ç« ï¼šCSSåŸºç¡€è¯­æ³•\",\"link\":\"/guide/chapter-04\",\"items\":[{\"text\":\"ä»€ä¹ˆæ˜¯CSS\",\"link\":\"/guide/chapter-04#ä»€ä¹ˆæ˜¯css\"},{\"text\":\"CSSé€‰æ‹©å™¨è¯¦è§£\",\"link\":\"/guide/chapter-04#cssé€‰æ‹©å™¨è¯¦è§£\"},{\"text\":\"DIVç›’å­æ¨¡å‹\",\"link\":\"/guide/chapter-04#divç›’å­æ¨¡å‹å®Œå…¨æŒ‡å—\"}]},{\"text\":\"ç¬¬6ç« ï¼šCSSé¢„å¤„ç†å™¨ - Less\",\"link\":\"/guide/chapter-05\",\"items\":[{\"text\":\"ä»€ä¹ˆæ˜¯Less\",\"link\":\"/guide/chapter-05#ä»€ä¹ˆæ˜¯less\"},{\"text\":\"Lessæ ¸å¿ƒç‰¹æ€§\",\"link\":\"/guide/chapter-05#lessæ ¸å¿ƒç‰¹æ€§\"}]},{\"text\":\"ç¬¬7ç« ï¼šCSSé¢„å¤„ç†å™¨ - SCSS\",\"link\":\"/guide/chapter-06\",\"items\":[{\"text\":\"ä»€ä¹ˆæ˜¯SCSS\",\"link\":\"/guide/chapter-06#ä»€ä¹ˆæ˜¯scss\"},{\"text\":\"SCSSæ ¸å¿ƒç‰¹æ€§\",\"link\":\"/guide/chapter-06#scssæ ¸å¿ƒç‰¹æ€§\"}]},{\"text\":\"ç¬¬8ç« ï¼šä»£ç è§„èŒƒ\",\"link\":\"/guide/chapter-07\"},{\"text\":\"ç¬¬9ç« ï¼šæ¨¡æ¿è¯­æ³•ä¸æ•°æ®ç»‘å®š\",\"link\":\"/guide/chapter-08\"}]},{\"text\":\"ç»„ä»¶å¼€å‘\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬10ç« ï¼šè®¡ç®—å±æ€§ä¸ä¾¦å¬å™¨\",\"link\":\"/guide/chapter-09\"},{\"text\":\"ç¬¬11ç« ï¼šæ¡ä»¶æ¸²æŸ“ä¸åˆ—è¡¨æ¸²æŸ“\",\"link\":\"/guide/chapter-10\"},{\"text\":\"ç¬¬12ç« ï¼šäº‹ä»¶å¤„ç†ä¸è¡¨å•ç»‘å®š\",\"link\":\"/guide/chapter-11\"},{\"text\":\"ç¬¬13ç« ï¼šç»„ä»¶åŸºç¡€ä¸ç»„ä»¶åç§°å®šä¹‰\",\"link\":\"/guide/chapter-12\"},{\"text\":\"ç¬¬14ç« ï¼šç»„ä»¶é€šä¿¡ï¼ˆå®Œæ•´ç‰ˆï¼‰\",\"link\":\"/guide/chapter-13\",\"items\":[{\"text\":\"Props çˆ¶ä¼ å­\",\"link\":\"/guide/chapter-13#props-çˆ¶ä¼ å­è¯¦è§£\"},{\"text\":\"Emit å­ä¼ çˆ¶\",\"link\":\"/guide/chapter-13#emit-å­ä¼ çˆ¶è¯¦è§£\"},{\"text\":\"Provide/Inject\",\"link\":\"/guide/chapter-13#provide--inject-è·¨å±‚çº§é€šä¿¡\"},{\"text\":\"æ’æ§½ Slots\",\"link\":\"/guide/chapter-13#æ’æ§½-slots\"},{\"text\":\"ä½œç”¨åŸŸæ’æ§½\",\"link\":\"/guide/chapter-13#ä½œç”¨åŸŸæ’æ§½\"}]},{\"text\":\"ç¬¬15ç« ï¼šç»„åˆå¼APIæ·±å…¥\",\"link\":\"/guide/chapter-14\",\"items\":[{\"text\":\"ref å’Œ reactive\",\"link\":\"/guide/chapter-14#ref-å’Œ-reactive\"},{\"text\":\"computed å’Œ watch\",\"link\":\"/guide/chapter-14#computed-å’Œ-watch\"},{\"text\":\"ç»„åˆå¼å‡½æ•°\",\"link\":\"/guide/chapter-14#ç»„åˆå¼å‡½æ•°composables\"},{\"text\":\"â­ é«˜çº§ç‰¹æ€§\",\"link\":\"/guide/chapter-14-advanced\"}]},{\"text\":\"ç¬¬16ç« ï¼šç”Ÿå‘½å‘¨æœŸä¸é’©å­å‡½æ•°\",\"link\":\"/guide/chapter-15\",\"items\":[{\"text\":\"ç”Ÿå‘½å‘¨æœŸé’©å­ä½¿ç”¨\",\"link\":\"/guide/chapter-15#ç”Ÿå‘½å‘¨æœŸé’©å­ä½¿ç”¨\"},{\"text\":\"ç”Ÿå‘½å‘¨æœŸå®æˆ˜åº”ç”¨\",\"link\":\"/guide/chapter-15#ç”Ÿå‘½å‘¨æœŸå®æˆ˜åº”ç”¨åœºæ™¯\"}]}]},{\"text\":\"ä¼ä¸šçº§å¼€å‘\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬17ç« ï¼šVue Router è·¯ç”±å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-16\",\"items\":[{\"text\":\"å®‰è£…å’Œé…ç½®\",\"link\":\"/guide/chapter-16#å®‰è£…å’Œé…ç½®\"},{\"text\":\"è·¯ç”±ä½¿ç”¨\",\"link\":\"/guide/chapter-16#è·¯ç”±ä½¿ç”¨\"},{\"text\":\"ç¼–ç¨‹å¼å¯¼èˆª\",\"link\":\"/guide/chapter-16#ç¼–ç¨‹å¼å¯¼èˆª\"},{\"text\":\"è·¯ç”±å®ˆå«ä¸æƒé™æ§åˆ¶\",\"link\":\"/guide/chapter-16#è·¯ç”±å®ˆå«ä¸æƒé™æ§åˆ¶\"},{\"text\":\"â­ é«˜çº§ç‰¹æ€§\",\"link\":\"/guide/chapter-16-advanced\"}]},{\"text\":\"ç¬¬18ç« ï¼šVueUseç»„åˆå¼å‡½æ•°åº“å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-17\",\"items\":[{\"text\":\"VueUseç®€ä»‹ä¸å®‰è£…\",\"link\":\"/guide/chapter-17#vueuseç®€ä»‹ä¸å®‰è£…\"},{\"text\":\"æ ¸å¿ƒå‡½æ•°è¯¦è§£\",\"link\":\"/guide/chapter-17#æ ¸å¿ƒå‡½æ•°è¯¦è§£\"},{\"text\":\"åŠ¨ç”»ç›¸å…³å‡½æ•°\",\"link\":\"/guide/chapter-17#åŠ¨ç”»ç›¸å…³å‡½æ•°\"}]},{\"text\":\"ç¬¬19ç« ï¼šPinia çŠ¶æ€ç®¡ç†\",\"link\":\"/guide/chapter-18\",\"items\":[{\"text\":\"â­ é«˜çº§ç‰¹æ€§\",\"link\":\"/guide/chapter-18-advanced\"}]},{\"text\":\"ç¬¬20ç« ï¼šTypeScript + Vue3\",\"link\":\"/guide/chapter-19\"},{\"text\":\"ç¬¬21ç« ï¼šé«˜çº§ç‰¹æ€§\",\"link\":\"/guide/chapter-20\"},{\"text\":\"ç¬¬22ç« ï¼šElementPlusç»„ä»¶åº“å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-21\"},{\"text\":\"ç¬¬23ç« ï¼šä¼ä¸šçº§é…ç½®\",\"link\":\"/guide/chapter-22\"},{\"text\":\"ç¬¬24ç« ï¼šæ€§èƒ½ä¼˜åŒ–\",\"link\":\"/guide/chapter-23\"},{\"text\":\"ç¬¬25ç« ï¼šGitç‰ˆæœ¬æ§åˆ¶ä¸å›¢é˜Ÿåä½œ\",\"link\":\"/guide/chapter-24\"}]},{\"text\":\"è¿›é˜¶éƒ¨åˆ†\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬26ç« ï¼šå…¨å±€å¼‚å¸¸æ•è·\",\"link\":\"/guide/chapter-25\"},{\"text\":\"ç¬¬27ç« ï¼šAPIè¯·æ±‚æ‹¦æˆª\",\"link\":\"/guide/chapter-26\"},{\"text\":\"ç¬¬28ç« ï¼šå†…å­˜ç®¡ç†ä¸æº¢å‡ºå¤„ç†\",\"link\":\"/guide/chapter-27\"},{\"text\":\"ç¬¬29ç« ï¼šè°ƒè¯•æŠ€å·§ä¸å·¥å…·\",\"link\":\"/guide/chapter-28\"},{\"text\":\"ç¬¬30ç« ï¼šå¾®å‰ç«¯æ¶æ„ï¼ˆqiankun é›†æˆï¼‰\",\"link\":\"/guide/chapter-29\"},{\"text\":\"ç¬¬31ç« ï¼šå‰ç«¯å®‰å…¨é˜²æŠ¤\",\"link\":\"/guide/chapter-30\"},{\"text\":\"ç¬¬32ç« ï¼šå‰ç«¯æµ‹è¯•\",\"link\":\"/guide/chapter-31\"},{\"text\":\"ç¬¬33ç« ï¼šè¡¨å•éªŒè¯ä¸æ•°æ®æ ¡éªŒ\",\"link\":\"/guide/chapter-32\"},{\"text\":\"ç¬¬34ç« ï¼šElectronæ¡Œé¢åº”ç”¨å¼€å‘\",\"link\":\"/guide/chapter-33\"},{\"text\":\"ç¬¬35ç« ï¼šå›½é™…åŒ–ï¼ˆI18nï¼‰\",\"link\":\"/guide/chapter-34\"},{\"text\":\"ç¬¬36ç« ï¼šå‰ç«¯å¯è§†åŒ–\",\"link\":\"/guide/chapter-35\"},{\"text\":\"ç¬¬37ç« ï¼šå‰ç«¯ç›‘æ§ä¸åŸ‹ç‚¹\",\"link\":\"/guide/chapter-36\"},{\"text\":\"ç¬¬38ç« ï¼šå‰ç«¯éƒ¨ç½²\",\"link\":\"/guide/chapter-37\"},{\"text\":\"ç¬¬39ç« ï¼šVite æ’ä»¶å¼€å‘\",\"link\":\"/guide/chapter-38\"},{\"text\":\"ç¬¬40ç« ï¼šå‰ç«¯å·¥ç¨‹åŒ–è¿›é˜¶\",\"link\":\"/guide/chapter-39\"}]},{\"text\":\"é«˜çº§æ‹“å±•\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"ç¬¬41ç« ï¼šVue3.4+æœ€æ–°ç‰¹æ€§è¯¦è§£\",\"link\":\"/guide/chapter-40\"},{\"text\":\"ç¬¬42ç« ï¼šå¸¸è§è¸©å‘æŒ‡å—ä¸FAQ\",\"link\":\"/guide/chapter-41\"},{\"text\":\"ç¬¬43ç« ï¼šä½¿ç”¨ Mock.js è¿›è¡Œæ•°æ®æ¨¡æ‹Ÿ\",\"link\":\"/guide/chapter-42\"},{\"text\":\"ç¬¬44ç« ï¼šæœåŠ¡ç«¯æ¸²æŸ“(SSR)ä¸Nuxt.jså®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-43\"},{\"text\":\"ç¬¬45ç« ï¼šç§»åŠ¨ç«¯å¼€å‘ä¸å“åº”å¼è®¾è®¡å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-44\"},{\"text\":\"ç¬¬46ç« ï¼šVue3ç»„ä»¶åº“å¼€å‘å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-45\"},{\"text\":\"ç¬¬47ç« ï¼šæ€§èƒ½åˆ†æä¸ä¼˜åŒ–å·¥å…·æ·±åº¦ä½¿ç”¨\",\"link\":\"/guide/chapter-46\"},{\"text\":\"ç¬¬48ç« ï¼šuni-appè·¨ç«¯åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—\",\"link\":\"/guide/chapter-47\"}]},{\"text\":\"é™„å½•\",\"collapsible\":true,\"collapsed\":false,\"items\":[{\"text\":\"é™„å½•Aï¼šå®æˆ˜é¡¹ç›®\",\"link\":\"/guide/appendix-projects\"},{\"text\":\"é™„å½•Bï¼šå­¦ä¹ èµ„æºæ¨è\",\"link\":\"/guide/appendix-resources\"},{\"text\":\"é™„å½•Cï¼šVSCodeé…ç½®æ¨è\",\"link\":\"/guide/appendix-vscode\"},{\"text\":\"é™„å½•Dï¼šä»£ç æ¨¡æ¿ä¸è„šæ‰‹æ¶\",\"link\":\"/guide/appendix-templates\"},{\"text\":\"é™„å½•Eï¼šå¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å•\",\"link\":\"/guide/appendix-checklist\"}]}]},\"socialLinks\":[],\"footer\":{\"message\":\"åŸºäº MIT è®¸å¯å‘å¸ƒ\",\"copyright\":\"Â© Simon å°å¾ 2026 | é‚®ç®±: esimonx@163.com\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"short\"}},\"outline\":{\"level\":[2,3],\"label\":\"æœ¬é¡µç›®å½•\"},\"returnToTopLabel\":\"å›åˆ°é¡¶éƒ¨\",\"sidebarMenuLabel\":\"èœå•\",\"docFooter\":{\"prev\":\"ä¸Šä¸€ç« \",\"next\":\"ä¸‹ä¸€ç« \"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>