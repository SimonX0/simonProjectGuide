---
title: ç¬¬21ç« ï¼šGBase å—å¤§é€šç”¨æ•°æ®åº“
---

# ï¼šGBase å—å¤§é€šç”¨æ•°æ®åº“

> **éš¾åº¦ç­‰çº§**ï¼šâ­â­ è¿›é˜¶ | **å­¦ä¹ æ—¶é•¿**ï¼š5å°æ—¶ | **å®æˆ˜é¡¹ç›®**ï¼šç”µä¿¡æ•°æ®ä»“åº“

## ğŸ“š æœ¬ç« ç›®å½•

- [19.1 GBase æ¦‚è¿°](#191-gbase-æ¦‚è¿°)
- [19.2 GBase 8a åˆ†æå‹æ•°æ®åº“](#192-gbase-8a-åˆ†æå‹æ•°æ®åº“)
- [19.3 GBase 8s äº‹åŠ¡å‹æ•°æ®åº“](#193-gbase-8s-äº‹åŠ¡å‹æ•°æ®åº“)
- [19.4 éƒ¨ç½²ä¸å®‰è£…](#194-éƒ¨ç½²ä¸å®‰è£…)
- [19.5 SQL ç‰¹æ€§ä¸ä¼˜åŒ–](#195-sql-ç‰¹æ€§ä¸ä¼˜åŒ–)
- [19.6 è¿ç§»å®æˆ˜](#196-è¿ç§»å®æˆ˜)

---

## GBase æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ GBaseï¼Ÿ

**GBase** æ˜¯**å¤©æ´¥å—å¤§é€šç”¨æ•°æ®æŠ€æœ¯è‚¡ä»½æœ‰é™å…¬å¸**ç ”å‘çš„å›½äº§æ•°æ®åº“ç³»åˆ—äº§å“ï¼ŒåŒ…æ‹¬ï¼š

```mermaid
graph TB
    A[GBase äº§å“å®¶æ—] --> B[GBase 8a]
    A --> C[GBase 8s]
    A --> D[GBase 8c]
    A --> E[GBase 8d]

    B --> B1[åˆ†æå‹æ•°æ®åº“]
    B --> B2[MPPæ¶æ„]
    B --> B3[åˆ—å­˜å‚¨]

    C --> C1[äº‹åŠ¡å‹æ•°æ®åº“]
    C --> C2[å…±äº«å­˜å‚¨]
    C --> C3[é«˜å¯ç”¨é›†ç¾¤]

    D --> D1[å†…å­˜æ•°æ®åº“]
    D --> D2[æä½å»¶è¿Ÿ]
    D --> D3[èåˆæ¶æ„]

    E --> E1[æ•°æ®ä»“åº“]
    E --> E2[å¤§è§„æ¨¡å¹¶è¡Œ]
    E --> E3[PBçº§å¤„ç†]
```

### å‘å±•å†ç¨‹

| æ—¶é—´ | é‡Œç¨‹ç¢‘ |
|-----|-------|
| **2004å¹´** | å—å¤§é€šç”¨æˆç«‹ï¼Œå¯åŠ¨æ•°æ®åº“ç ”å‘ |
| **2010å¹´** | GBase 8a å‘å¸ƒï¼Œé¢å‘åˆ†æå‹åœºæ™¯ |
| **2013å¹´** | è¿›å…¥ç”µä¿¡ã€é‡‘èè¡Œä¸š |
| **2016å¹´** | GBase 8s å‘å¸ƒï¼Œæ”¯æŒäº‹åŠ¡å‹åº”ç”¨ |
| **2018å¹´** | å¸‚åœºå æœ‰ç‡è¿›å…¥å›½äº§æ•°æ®åº“å‰åˆ— |
| **2020å¹´** | GBase 8c å†…å­˜æ•°æ®åº“å‘å¸ƒ |
| **2022å¹´** | GBase 8d æ•°æ®ä»“åº“å‘å¸ƒï¼Œæ”¯æŒ PB çº§ |
| **2024å¹´** | å…¨ç³»åˆ—äº§å“é€šè¿‡å¤šé¡¹å›½å®¶çº§è®¤è¯ |

### åº”ç”¨åœºæ™¯

**ç”µä¿¡è¡Œä¸š**ï¼ˆä¸»åŠ›å¸‚åœºï¼‰ï¼š
- ä¸­å›½ç§»åŠ¨ã€è”é€šã€ç”µä¿¡
- ç»è¥åˆ†æç³»ç»Ÿã€è®¡è´¹ç³»ç»Ÿ
- å®¢æˆ·ç”»åƒã€å¤§æ•°æ®å¹³å°

**é‡‘èè¡Œä¸š**ï¼š
- é“¶è¡Œæ•°æ®ä»“åº“
- ä¿¡ç”¨å¡äº¤æ˜“åˆ†æ
- é£æ§ç³»ç»Ÿã€åæ´—é’±

**æ”¿åŠ¡èƒ½æº**ï¼š
- æ”¿åŠ¡å¤§æ•°æ®å¹³å°
- ç”µç½‘æ•°æ®åˆ†æ
- äº¤é€šæµé‡åˆ†æ

---

## GBase 8a åˆ†æå‹æ•°æ®åº“

### æ ¸å¿ƒç‰¹æ€§

**MPP æ¶æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GBase 8a é›†ç¾¤                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Coordinator Node 1  â”‚  Coordinator Node 2  â”‚  ...          â”‚
â”‚  (åè°ƒèŠ‚ç‚¹)           â”‚  (åè°ƒèŠ‚ç‚¹)           â”‚               â”‚
â”‚       â”‚              â”‚        â”‚             â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â”‚              â”‚        â”‚             â”‚               â”‚
â”‚  Data Node 1      Data Node 2        Data Node N          â”‚
â”‚  (æ•°æ®èŠ‚ç‚¹)        (æ•°æ®èŠ‚ç‚¹)          (æ•°æ®èŠ‚ç‚¹)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ åˆ†ç‰‡ 1  â”‚       â”‚ åˆ†ç‰‡ 2  â”‚         â”‚ åˆ†ç‰‡ N  â”‚           â”‚
â”‚  â”‚ åˆ†ç‰‡ 2  â”‚       â”‚ åˆ†ç‰‡ 3  â”‚         â”‚ åˆ†ç‰‡ N+1â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚       â”‚              â”‚                 â”‚                   â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚              é«˜é€Ÿäº’è”ç½‘ç»œï¼ˆ10GbE/InfiniBandï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ—å­˜å‚¨å¼•æ“**ï¼š

**ä¼˜åŠ¿**ï¼š
- æŸ¥è¯¢åªè¯»å–éœ€è¦çš„åˆ—ï¼Œå‡å°‘ I/O
- åŒåˆ—æ•°æ®ç±»å‹ä¸€è‡´ï¼Œå‹ç¼©æ¯”é«˜ï¼ˆ10:1 ~ 100:1ï¼‰
- é€‚åˆèšåˆã€åˆ†ææŸ¥è¯¢
- æ”¯æŒå‘é‡åŒ–æ‰§è¡Œ

**é€‚ç”¨åœºæ™¯**ï¼š
- æ•°æ®ä»“åº“ã€OLAP
- æŠ¥è¡¨ç»Ÿè®¡ã€å•†ä¸šæ™ºèƒ½
- ç”¨æˆ·è¡Œä¸ºåˆ†æ
- æ—¥å¿—åˆ†æ

### GBase 8a æ¶æ„

```mermaid
graph TB
    A[GBase 8a] --> B[è®¡ç®—å±‚]
    A --> C[å­˜å‚¨å±‚]
    A --> D[ç®¡ç†å±‚]

    B --> B1[SQLè§£æ]
    B --> B2[æŸ¥è¯¢ä¼˜åŒ–]
    B --> B3[å¹¶è¡Œæ‰§è¡Œ]
    B --> B4[ç»“æœæ±‡æ€»]

    C --> C1[åˆ—å­˜å‚¨]
    C --> C2[æ•°æ®å‹ç¼©]
    C --> C3[åˆ†åŒºåˆ†æ¡¶]
    C --> C4[ç´¢å¼•ç»“æ„]

    D --> D1[é›†ç¾¤ç®¡ç†]
    D --> D2[ä»»åŠ¡è°ƒåº¦]
    D --> D3[ç›‘æ§å‘Šè­¦]
    D --> D4[å¤‡ä»½æ¢å¤]
```

---

## GBase 8s äº‹åŠ¡å‹æ•°æ®åº“

### æ ¸å¿ƒç‰¹æ€§

**å…±äº«å­˜å‚¨é›†ç¾¤**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GBase 8s é›†ç¾¤                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸»èŠ‚ç‚¹ï¼ˆPrimaryï¼‰     â”‚  å¤‡èŠ‚ç‚¹ï¼ˆStandbyï¼‰    â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚               â”‚
â”‚  â”‚  è¯»å†™æœåŠ¡   â”‚      â”‚  â”‚  åªè¯»æœåŠ¡   â”‚    â”‚               â”‚
â”‚  â”‚  WAL å†™å…¥   â”‚      â”‚  â”‚  WAL è¯»å–  â”‚    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚               â”‚
â”‚         â”‚             â”‚         â”‚            â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚               â”‚
â”‚                       â”‚                    â”‚               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚               â”‚
â”‚              â”‚  å…±äº«å­˜å‚¨é˜µåˆ—  â”‚             â”‚               â”‚
â”‚              â”‚  (SAN/NAS)     â”‚             â”‚               â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹æ€§å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | GBase 8a | GBase 8s |
|-----|----------|----------|
| **å®šä½** | åˆ†æå‹ | äº‹åŠ¡å‹ |
| **æ¶æ„** | MPP | å…±äº«å­˜å‚¨ |
| **å­˜å‚¨** | åˆ—å­˜ | è¡Œå­˜ |
| **æŸ¥è¯¢** | å¤æ‚åˆ†æ | ç®€å•æŸ¥è¯¢ |
| **äº‹åŠ¡** | ä¸æ”¯æŒ | ACID å®Œæ•´æ”¯æŒ |
| **åœºæ™¯** | æ•°æ®ä»“åº“ | æ ¸å¿ƒäº¤æ˜“ |
| **å¹¶å‘** | ä¸­ç­‰ | é«˜å¹¶å‘ |
| **å“åº”** | ç§’çº§ | æ¯«ç§’çº§ |

---

## éƒ¨ç½²ä¸å®‰è£…

### GBase 8a å•æœºéƒ¨ç½²

```bash
# 1. ä¸‹è½½å®‰è£…åŒ…
# ä»å—å¤§é€šç”¨å®˜ç½‘è·å–å®‰è£…åŒ…

# 2. è§£å‹å®‰è£…
tar -zxvf GBase8a-Installer-V9.5.2.tar.gz

# 3. è¿è¡Œå®‰è£…è„šæœ¬
cd GBase8a-Installer-V9.5.2
./install.sh

# 4. é…ç½®ç¯å¢ƒå˜é‡
source ~/.gbase_base_profile

# 5. åˆå§‹åŒ–æ•°æ®åº“
gbase_init_db --datadir=/opt/gbase/data

# 6. å¯åŠ¨æœåŠ¡
gbase_server start

# 7. è¿æ¥æ•°æ®åº“
gcli -uroot -p
```

### Docker éƒ¨ç½²ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰

```bash
# æ‹‰å–é•œåƒï¼ˆéœ€è¦ä»å—å¤§é€šç”¨è·å–ï¼‰
docker pull gbase/gbase8a:latest

# å¯åŠ¨å®¹å™¨
docker run -d \
  --name gbase8a \
  -p 9088:9088 \
  -e GBASE_PASSWORD=yourpassword \
  -v /data/gbase:/opt/gbase/data \
  gbase/gbase8a:latest

# è¿æ¥æµ‹è¯•
docker exec -it gbase8a gcli -uroot -p
```

### åŸºæœ¬æ“ä½œ

```sql
-- 1. åˆ›å»ºæ•°æ®åº“
CREATE DATABASE testdb;

-- 2. ä½¿ç”¨æ•°æ®åº“
USE testdb;

-- 3. åˆ›å»ºè¡¨
CREATE TABLE users (
    user_id INT,
    username VARCHAR(50),
    email VARCHAR(100),
    status TINYINT,
    create_time DATETIME
) DISTRIBUTE BY HASH(user_id)  -- æŒ‡å®šåˆ†ç‰‡åˆ—
TO NODE GROUP "default_group";  -- æŒ‡å®šèŠ‚ç‚¹ç»„

-- 4. æ’å…¥æ•°æ®
INSERT INTO users VALUES
(1, 'alice', 'alice@example.com', 1, NOW()),
(2, 'bob', 'bob@example.com', 1, NOW());

-- 5. æŸ¥è¯¢æ•°æ®
SELECT * FROM users WHERE status = 1;

-- 6. ç»Ÿè®¡æŸ¥è¯¢
SELECT status, COUNT(*) as count
FROM users
GROUP BY status;
```

---

## SQL ç‰¹æ€§ä¸ä¼˜åŒ–

### åˆ†åŒºè¡¨

```sql
-- Range åˆ†åŒº
CREATE TABLE orders (
    order_id BIGINT,
    user_id BIGINT,
    order_time DATETIME,
    amount DECIMAL(10,2)
) PARTITION BY RANGE (TO_DAYS(order_time))
(
    PARTITION p202401 VALUES LESS THAN (TO_DAYS('2024-02-01')),
    PARTITION p202402 VALUES LESS THAN (TO_DAYS('2024-03-01')),
    PARTITION p202403 VALUES LESS THAN (TO_DAYS('2024-04-01')),
    PARTITION pmax VALUES LESS THAN MAXVALUE
)
DISTRIBUTE BY HASH(user_id);

-- æŸ¥çœ‹åˆ†åŒº
SHOW PARTITIONS orders;

-- åˆ é™¤åˆ†åŒº
ALTER TABLE orders DROP PARTITION p202401;

-- æ·»åŠ åˆ†åŒº
ALTER TABLE orders ADD PARTITION (
    PARTITION p202405 VALUES LESS THAN (TO_DAYS('2024-06-01'))
);
```

### ç´¢å¼•ä¼˜åŒ–

```sql
-- åˆ›å»ºäºŒçº§ç´¢å¼•
CREATE INDEX idx_users_status ON users(status);
CREATE INDEX idx_users_email ON users(email);

-- åˆ›å»ºä½å›¾ç´¢å¼•ï¼ˆé€‚åˆä½åŸºæ•°åˆ—ï¼‰
CREATE BITMAP INDEX idx_users_status_bitmap ON users(status);

-- æŸ¥çœ‹ç´¢å¼•
SHOW INDEX FROM users;

-- æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’
EXPLAIN
SELECT * FROM users WHERE email = 'alice@example.com';
```

### å¹¶è¡ŒæŸ¥è¯¢

```sql
-- è®¾ç½®å¹¶è¡Œåº¦
SET parallel_workers = 8;

-- å¹¶è¡ŒæŸ¥è¯¢æç¤º
SELECT /*+ PARALLEL(8) */
    user_id,
    COUNT(*) as order_count,
    SUM(amount) as total_amount
FROM orders
WHERE order_time >= '2024-01-01'
GROUP BY user_id;
```

### æ•°æ®åŠ è½½ä¼˜åŒ–

```sql
-- 1. LOAD DATA æ–¹å¼ï¼ˆæ¨èï¼‰
LOAD DATA INFILE '/data/orders.csv'
INTO TABLE orders
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 LINES  -- è·³è¿‡é¦–è¡Œ
(user_id, order_time, amount);

-- 2. æ‰¹é‡æ’å…¥ä¼˜åŒ–
SET autocommit = 0;
SET unique_checks = 0;
SET foreign_key_checks = 0;

-- æ‰¹é‡æ’å…¥
INSERT INTO orders VALUES (...), (...), (...);

COMMIT;

SET autocommit = 1;
SET unique_checks = 1;
SET foreign_key_checks = 1;
```

---

## è¿ç§»å®æˆ˜

### ä» MySQL è¿ç§»åˆ° GBase 8a

#### ä½¿ç”¨ GBase è¿ç§»å·¥å…·

**1. è¯„ä¼°å…¼å®¹æ€§**ï¼š

```bash
# ä½¿ç”¨ GBase å…¼å®¹æ€§è¯„ä¼°å·¥å…·
gb_migrate assess \
    --source mysql://user:pass@host:3306/dbname \
    --report compatibility_report.html
```

**2. æ•°æ®ç»“æ„è¿ç§»**ï¼š

```sql
-- MySQL â†’ GBase 8a ç±»å‹æ˜ å°„
-- MySQL           GBase 8a
-- ----------------------------------------
-- TINYINT         TINYINT
-- SMALLINT        SMALLINT
-- INT             INT
-- BIGINT          BIGINT
-- FLOAT           FLOAT
-- DOUBLE          DOUBLE
-- DECIMAL(p,s)    DECIMAL(p,s)
-- VARCHAR(n)      VARCHAR(n)
-- TEXT            TEXT
-- DATETIME        DATETIME
-- DATE            DATE
-- TIMESTAMP       TIMESTAMP
```

**3. æ•°æ®è¿ç§»**ï¼š

```bash
# å…¨é‡è¿ç§»
gb_migrate data \
    --source mysql://user:pass@host:3306/dbname \
    --target gbase://user:pass@host:9088/dbname \
    --parallel 8 \
    --batch-size 50000

# å¢é‡åŒæ­¥
gb_migrate sync \
    --source mysql://user:pass@host:3306/dbname \
    --target gbase://user:pass@host:9088/dbname \
    --mode incremental \
    --position mysql-bin.000123:456789
```

**4. SQL è¯­æ³•è°ƒæ•´**ï¼š

```sql
-- MySQL
SELECT * FROM users LIMIT 10;

-- GBase 8aï¼ˆå…¼å®¹ï¼‰
SELECT * FROM users LIMIT 10;

-- MySQL
SELECT DATE_FORMAT(order_time, '%Y-%m-%d') FROM orders;

-- GBase 8a
SELECT DATE_FORMAT(order_time, '%Y-%m-%d') FROM orders;

-- MySQL
SELECT * FROM orders WHERE status IN (1, 2, 3);

-- GBase 8aï¼ˆå…¼å®¹ï¼‰
SELECT * FROM orders WHERE status IN (1, 2, 3);
```

### å…¸å‹æ¡ˆä¾‹ï¼šç”µä¿¡æ•°æ®ä»“åº“

**åœºæ™¯æè¿°**ï¼š
- æ•°æ®é‡ï¼š10TB+ å†å²æ•°æ®
- æ—¥å¢é‡ï¼š50GB+
- æŸ¥è¯¢ç‰¹ç‚¹ï¼šå¤æ‚èšåˆã€å¤šç»´åº¦åˆ†æ
- SLA è¦æ±‚ï¼šæŸ¥è¯¢å“åº” < 30ç§’

**è¿ç§»æ–¹æ¡ˆ**ï¼š

```sql
-- 1. åˆ†åŒºè®¾è®¡ï¼ˆæŒ‰æ—¥æœŸï¼‰
CREATE TABLE call_records (
    call_id BIGINT,
    caller_id BIGINT,
    callee_id BIGINT,
    call_time DATETIME,
    duration INT,
    amount DECIMAL(10,2)
) PARTITION BY RANGE (TO_DAYS(call_time))
(
    -- æ¯æœˆä¸€ä¸ªåˆ†åŒº
    PARTITION p202401 VALUES LESS THAN (TO_DAYS('2024-02-01')),
    PARTITION p202402 VALUES LESS THAN (TO_DAYS('2024-03-01')),
    -- ... æ›´å¤šåˆ†åŒº
)
DISTRIBUTE BY HASH(caller_id)  -- æŒ‰ caller_id åˆ†ç‰‡
TO NODE GROUP "dn_all";       -- ä½¿ç”¨æ‰€æœ‰èŠ‚ç‚¹

-- 2. åˆ›å»ºç‰©åŒ–è§†å›¾
CREATE MATERIALIZED VIEW mv_daily_call_stats
REFRESH COMPLETE ON DAY
AS
SELECT
    caller_id,
    DATE(call_time) as call_date,
    COUNT(*) as call_count,
    SUM(duration) as total_duration,
    SUM(amount) as total_amount
FROM call_records
GROUP BY caller_id, DATE(call_time);

-- 3. æŸ¥è¯¢ä¼˜åŒ–ï¼ˆä½¿ç”¨ç‰©åŒ–è§†å›¾ï¼‰
SELECT
    caller_id,
    SUM(call_count) as total_calls,
    SUM(total_duration) as total_duration
FROM mv_daily_call_stats
WHERE call_date BETWEEN '2024-01-01' AND '2024-01-31'
GROUP BY caller_id;
```

---

## âœ… æœ¬ç« å°ç»“

### å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œè¯·ç¡®è®¤ä½ èƒ½å¤Ÿï¼š

- [ ] ç†è§£ GBase äº§å“ç³»åˆ—ï¼ˆ8aã€8sã€8cã€8dï¼‰
- [ ] æŒæ¡ GBase 8a çš„ MPP æ¶æ„å’Œåˆ—å­˜å‚¨ç‰¹æ€§
- [ ] äº†è§£ GBase 8s çš„å…±äº«å­˜å‚¨é›†ç¾¤æ¶æ„
- [ ] éƒ¨ç½²å’Œä½¿ç”¨ GBase 8a
- [ ] åˆ›å»ºåˆ†åŒºè¡¨å’Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- [ ] ä» MySQL è¿ç§»åˆ° GBase 8a
- [ ] è®¾è®¡ç”µä¿¡çº§æ•°æ®ä»“åº“

### æ ¸å¿ƒè¦ç‚¹å›é¡¾

1. **äº§å“ç³»åˆ—**ï¼š8a åˆ†æå‹ã€8s äº‹åŠ¡å‹ã€8c å†…å­˜å‹ã€8d æ•°æ®ä»“åº“
2. **MPP æ¶æ„**ï¼šå¤§è§„æ¨¡å¹¶è¡Œå¤„ç†ï¼Œçº¿æ€§æ‰©å±•
3. **åˆ—å­˜å‚¨**ï¼šé«˜å‹ç¼©æ¯”ã€å¿«é€Ÿåˆ†æ
4. **ç”µä¿¡ä¼˜åŠ¿**ï¼šåœ¨ç”µä¿¡è¡Œä¸šå¸‚åœºå æœ‰ç‡é¢†å…ˆ
5. **å¹³æ»‘è¿ç§»**ï¼šå®Œå–„çš„è¿ç§»å·¥å…·é“¾

## ğŸ“š å»¶ä¼¸é˜…è¯»

- [ç¬¬15ç« ï¼šå›½äº§åˆ†å¸ƒå¼æ•°æ®åº“ - OceanBase â†’](./chapter-14)
- [ç¬¬16ç« ï¼šå›½äº§åˆ†å¸ƒå¼æ•°æ®åº“ - TiDB â†’](./chapter-15)
- [ç¬¬17ç« ï¼šäººå¤§é‡‘ä»“ KingbaseES å®æˆ˜ â†’](./chapter-16)
- [å—å¤§é€šç”¨å®˜ç½‘](http://www.gbase.cn/)

---

**æ›´æ–°æ—¶é—´**ï¼š2026å¹´2æœˆ | **ç‰ˆæœ¬**ï¼šv1.0
