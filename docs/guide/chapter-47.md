# uni-appè·¨ç«¯åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—

## uni-appè·¨ç«¯åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—
> **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡uni-appè·¨ç«¯å¼€å‘æŠ€æœ¯ï¼Œä¸€æ¬¡ç¼–å†™å¤šç«¯è¿è¡Œ
> **æ ¸å¿ƒå†…å®¹**ï¼šuni-appåŸºç¡€ã€ç¯å¢ƒæ­å»ºã€ç»„ä»¶å¼€å‘ã€APIä½¿ç”¨ã€è·¨ç«¯å‘å¸ƒ

### uni-appç®€ä»‹

#### ä»€ä¹ˆæ˜¯uni-app

**uni-app** æ˜¯ä¸€ä¸ªä½¿ç”¨ Vue.js å¼€å‘æ‰€æœ‰å‰ç«¯åº”ç”¨çš„æ¡†æ¶ï¼Œå¼€å‘è€…ç¼–å†™ä¸€å¥—ä»£ç ï¼Œå¯å‘å¸ƒåˆ°iOSã€Androidã€Webï¼ˆå“åº”å¼ï¼‰ã€ä»¥åŠå„ç§å°ç¨‹åºï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/ç™¾åº¦/å¤´æ¡/QQ/é’‰é’‰/æ·˜å®ï¼‰ã€å¿«åº”ç”¨ç­‰å¤šä¸ªå¹³å°ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    uni-app æ¶æ„æ¦‚è§ˆ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  uni-app åº”ç”¨å±‚                            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  Vue.js è¯­æ³•  â”‚  ç»„ä»¶ç³»ç»Ÿ  â”‚  API  â”‚  è·¯ç”±  â”‚  çŠ¶æ€ç®¡ç†   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  uni-app æ¡†æ¶å±‚                           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  æ¡ä»¶ç¼–è¯‘  â”‚  è·¨ç«¯å¤„ç†  â”‚  æ€§èƒ½ä¼˜åŒ–  â”‚  æ’ä»¶æœºåˆ¶          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    å¤šç«¯è¿è¡Œæ—¶                              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Web â”‚ å¾®ä¿¡å°ç¨‹åº â”‚ App â”‚ æ”¯ä»˜å® â”‚ ...                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### uni-appæ ¸å¿ƒä¼˜åŠ¿

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ä¸€å¥—ä»£ç ** | ç¼–è¯‘åˆ°å¤šä¸ªå¹³å°ï¼Œå‡å°‘é‡å¤å¼€å‘ |
| **Vueç”Ÿæ€** | å®Œæ•´ä½¿ç”¨Vue.jsè¯­æ³•ï¼Œä¸Šæ‰‹å¿« |
| **ç»„ä»¶ä¸°å¯Œ** | å†…ç½®å¤§é‡è·¨ç«¯ç»„ä»¶å’ŒAPI |
| **æ€§èƒ½ä¼˜ç§€** | åŸç”Ÿæ¸²æŸ“ï¼Œæ¥è¿‘åŸç”Ÿåº”ç”¨æ€§èƒ½ |
| **æ’ä»¶å¸‚åœº** | ä¸°å¯Œçš„UIæ’ä»¶å’ŒåŠŸèƒ½æ’ä»¶ |
| **ç¤¾åŒºæ´»è·ƒ** | DCloudå®˜æ–¹ç»´æŠ¤ï¼Œç¤¾åŒºåºå¤§ |

#### uni-app vs å…¶ä»–è·¨ç«¯æ–¹æ¡ˆ

| æ¡†æ¶ | æŠ€æœ¯æ ˆ | æ”¯æŒå¹³å° | æ€§èƒ½ | å¼€å‘ä½“éªŒ |
|------|--------|----------|------|----------|
| **uni-app** | Vue.js | 12+ | â­â­â­â­ | â­â­â­â­â­ |
| **Taro** | React/Vue | 6+ | â­â­â­â­ | â­â­â­â­ |
| **Flutter** | Dart | 6+ | â­â­â­â­â­ | â­â­â­ |
| **React Native** | React | 2+ | â­â­â­â­ | â­â­â­ |

#### uni-appé€‚ç”¨åœºæ™¯

âœ… **æ¨èä½¿ç”¨ï¼š**
- éœ€è¦åŒæ—¶å¼€å‘å°ç¨‹åºå’ŒAppçš„é¡¹ç›®
- ä¸­å°å‹è·¨ç«¯åº”ç”¨
- VueæŠ€æœ¯æ ˆå›¢é˜Ÿ
- ç”µå•†ã€å±•ç¤ºç±»åº”ç”¨
- ä¼ä¸šå†…éƒ¨åº”ç”¨

âŒ **ä¸æ¨èä½¿ç”¨ï¼š**
- å¤æ‚çš„å›¾å½¢æ¸²æŸ“åº”ç”¨
- éœ€è¦è°ƒç”¨å¤§é‡åŸç”ŸAPIçš„åº”ç”¨
- å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„æ¸¸æˆç±»åº”ç”¨

---

### ç¯å¢ƒæ­å»ºä¸é¡¹ç›®åˆå§‹åŒ–

#### å®‰è£…HBuilderX

**HBuilderX** æ˜¯DCloudå®˜æ–¹æ¨å‡ºçš„IDEï¼Œå¯¹uni-appæœ‰æœ€å¥½çš„æ”¯æŒã€‚

```bash
# ä¸‹è½½HBuilderX
# å®˜ç½‘: https://www.dcloud.io/hbuilderx.html

# é€‰æ‹©ç‰ˆæœ¬:
# - Appå¼€å‘ç‰ˆ: æ”¯æŒAppäº‘æ‰“åŒ…å’ŒçœŸæœºè¿è¡Œ
# - æ ‡å‡†ç‰ˆ: ä»…æ”¯æŒå°ç¨‹åºå’ŒH5
```

**HBuilderXå®‰è£…é…ç½®ï¼š**

```
å®‰è£…åé…ç½®:
1. æ–‡ä»¶ â†’ è®¾ç½® â†’ é…ç½®
2. é…ç½®å¸¸ç”¨è·¯å¾„ï¼š
   - å¾®ä¿¡å¼€å‘è€…å·¥å…·è·¯å¾„
   - Node.jsè·¯å¾„
3. å®‰è£…æ’ä»¶ï¼š
   - uni-appç¼–è¯‘å™¨
   - uni-appå°ç¨‹åº
   - AppçœŸæœºè¿è¡Œ
```

#### åˆ›å»ºuni-appé¡¹ç›®

**æ–¹å¼ä¸€ï¼šHBuilderXå¯è§†åŒ–åˆ›å»º**

```
1. æ–‡ä»¶ â†’ æ–°å»º â†’ é¡¹ç›®
2. é€‰æ‹© uni-app
3. æ¨¡æ¿é€‰æ‹©:
   - uni-appé»˜è®¤æ¨¡æ¿
   - Vue3/Viteç‰ˆæœ¬ï¼ˆæ¨èï¼‰
4. é¡¹ç›®åç§°: my-uniapp
5. åˆ›å»º
```

**æ–¹å¼äºŒï¼šVue3/Vite CLIåˆ›å»º**

```bash
# å®‰è£…Vue3/Viteç‰ˆuni-app
npx degit dcloudio/uni-preset-vue#vite my-uniapp

# è¿›å…¥é¡¹ç›®
cd my-uniapp

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œé¡¹ç›®
npm run dev:h5        # H5
npm run dev:mp-weixin # å¾®ä¿¡å°ç¨‹åº
npm run dev:app       # App
```

#### é¡¹ç›®ç»“æ„

```
my-uniapp/
â”œâ”€â”€ pages/                  # é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â””â”€â”€ index.vue      # é¦–é¡µ
â”‚   â””â”€â”€ user/
â”‚       â””â”€â”€ user.vue       # ç”¨æˆ·é¡µ
â”œâ”€â”€ static/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ fonts/
â”œâ”€â”€ uni_modules/           # uni-appæ’ä»¶ç›®å½•
â”œâ”€â”€ components/           # ç»„ä»¶ç›®å½•
â”‚   â””â”€â”€ my-component/
â”‚       â””â”€â”€ my-component.vue
â”œâ”€â”€ api/                  # APIæ¥å£
â”œâ”€â”€ store/                # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ App.vue               # åº”ç”¨é…ç½®
â”œâ”€â”€ main.js               # å…¥å£æ–‡ä»¶
â”œâ”€â”€ manifest.json         # åº”ç”¨é…ç½®
â”œâ”€â”€ pages.json            # é¡µé¢è·¯ç”±é…ç½®
â””â”€â”€ uni.scss              # å…¨å±€æ ·å¼å˜é‡
```

#### é…ç½®æ–‡ä»¶è¯¦è§£

**manifest.json - åº”ç”¨é…ç½®**

```json
{
  "name": "æˆ‘çš„åº”ç”¨",
  "appid": "__UNI__XXXXXX",
  "description": "åº”ç”¨æè¿°",
  "versionName": "1.0.0",
  "versionCode": "100",
  "transformPx": false,
  "app-plus": {
    "usingComponents": true,
    "nvueStyleCompiler": "uni-app",
    "compilerVersion": 3,
    "splashscreen": {
      "alwaysShowBeforeRender": true,
      "waiting": true,
      "autoclose": true,
      "delay": 0
    },
    "modules": {},
    "distribute": {
      "android": {
        "permissions": []
      },
      "ios": {},
      "sdkConfigs": {}
    }
  },
  "quickapp": {},
  "mp-weixin": {
    "appid": "",
    "setting": {
      "urlCheck": false
    },
    "usingComponents": true
  },
  "mp-alipay": {
    "usingComponents": true
  },
  "mp-baidu": {
    "usingComponents": true
  },
  "mp-toutiao": {
    "usingComponents": true
  },
  "h5": {
    "title": "æˆ‘çš„åº”ç”¨",
    "domain": "",
    "router": {
      "mode": "hash",
      "base": "./"
    }
  }
}
```

**pages.json - é¡µé¢è·¯ç”±é…ç½®**

```json
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ",
        "enablePullDownRefresh": false
      }
    },
    {
      "path": "pages/user/user",
      "style": {
        "navigationBarTitleText": "æˆ‘çš„",
        "navigationStyle": "custom"
      }
    }
  ],
  "globalStyle": {
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "uni-app",
    "navigationBarBackgroundColor": "#F8F8F8",
    "backgroundColor": "#F8F8F8"
  },
  "tabBar": {
    "color": "#7A7E83",
    "selectedColor": "#3cc51f",
    "borderStyle": "black",
    "backgroundColor": "#ffffff",
    "list": [
      {
        "pagePath": "pages/index/index",
        "iconPath": "static/tab-home.png",
        "selectedIconPath": "static/tab-home-active.png",
        "text": "é¦–é¡µ"
      },
      {
        "pagePath": "pages/user/user",
        "iconPath": "static/tab-user.png",
        "selectedIconPath": "static/tab-user-active.png",
        "text": "æˆ‘çš„"
      }
    ]
  },
  "uniIdRouter": {}
}
```

---

### åŸºç¡€ç»„ä»¶ä¸API

#### å¸¸ç”¨å†…ç½®ç»„ä»¶

**è§†å›¾å®¹å™¨ç±»ç»„ä»¶**

```vue
<template>
  <view class="container">
    <!-- view ç±»ä¼¼äº div -->
    <view class="box">è§†å›¾å®¹å™¨</view>

    <!-- scroll-view å¯æ»šåŠ¨è§†å›¾ -->
    <scroll-view
      scroll-y
      style="height: 200px;"
      @scrolltoupper="onScrollToUpper"
      @scrolltolower="onScrollToLower"
    >
      <view v-for="i in 20" :key="i" class="item">item {{ i }}</view>
    </scroll-view>

    <!-- swiper è½®æ’­å›¾ -->
    <swiper
      :indicator-dots="true"
      :autoplay="true"
      :interval="3000"
      :duration="1000"
      @change="onSwiperChange"
    >
      <swiper-item v-for="(item, index) in banners" :key="index">
        <image :src="item.url" mode="aspectFill"></image>
      </swiper-item>
    </swiper>

    <!-- movable-area å¯æ‹–åŠ¨åŒºåŸŸ -->
    <movable-area style="height: 200px; width: 100%;">
      <movable-view :x="x" :y="y" direction="all">
        å¯æ‹–åŠ¨
      </movable-view>
    </movable-area>
  </view>
</template>

<script setup>
import { ref } from 'vue'

const banners = ref([
  { url: '/static/banner1.jpg' },
  { url: '/static/banner2.jpg' }
])

const x = ref(100)
const y = ref(100)

function onScrollToUpper() {
  console.log('æ»šåŠ¨åˆ°é¡¶éƒ¨')
}

function onScrollToLower() {
  console.log('æ»šåŠ¨åˆ°åº•éƒ¨')
}

function onSwiperChange(e) {
  console.log('å½“å‰ç´¢å¼•:', e.detail.current)
}
</script>
```

**åŸºç¡€å†…å®¹ç»„ä»¶**

```vue
<template>
  <view>
    <!-- text æ–‡æœ¬ -->
    <text> selectable å¯é€‰æœ¬æ–‡æœ¬</text>
    <text space="ensp">å­—  é—´  è·</text>

    <!-- rich-text å¯Œæ–‡æœ¬ -->
    <rich-text :nodes="htmlNodes"></rich-text>

    <!-- progress è¿›åº¦æ¡ -->
    <progress percent="20" show-info stroke-width="6" />

    <!-- icon å›¾æ ‡ -->
    <icon type="success" size="30" color="#007aff" />
  </view>
</template>

<script setup>
const htmlNodes = '<div style="text-align:center;"><img src="https://example.com/image.png"><p>å¯Œæ–‡æœ¬å†…å®¹</p></div>'
</script>
```

**è¡¨å•ç»„ä»¶**

```vue
<template>
  <view class="form">
    <!-- button æŒ‰é’® -->
    <button type="primary" @click="handleClick">ä¸»è¦æŒ‰é’®</button>
    <button type="default" plain>é•‚ç©ºæŒ‰é’®</button>
    <button type="warn" size="mini">è­¦å‘ŠæŒ‰é’®</button>

    <!-- input è¾“å…¥æ¡† -->
    <input
      v-model="formData.username"
      placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
      type="text"
      @confirm="onInputConfirm"
    />

    <!-- textarea å¤šè¡Œè¾“å…¥ -->
    <textarea
      v-model="formData.desc"
      placeholder="è¯·è¾“å…¥æè¿°"
      maxlength="200"
      @input="onTextareaInput"
    />

    <!-- radio å•é€‰ -->
    <radio-group @change="onRadioChange">
      <label v-for="item in radioItems" :key="item.value">
        <radio :value="item.value" :checked="item.value === formData.radio" />
        {{ item.name }}
      </label>
    </radio-group>

    <!-- checkbox å¤é€‰ -->
    <checkbox-group @change="onCheckboxChange">
      <label v-for="item in checkboxItems" :key="item.value">
        <checkbox
          :value="item.value"
          :checked="formData.checklist.includes(item.value)"
        />
        {{ item.name }}
      </label>
    </checkbox-group>

    <!-- switch å¼€å…³ -->
    <switch :checked="formData.switch" @change="onSwitchChange" />

    <!-- slider æ»‘å— -->
    <slider
      :value="formData.slider"
      @change="onSliderChange"
      show-value
    />

    <!-- picker é€‰æ‹©å™¨ -->
    <picker
      mode="selector"
      :range="selectorRange"
      @change="onPickerChange"
    >
      <view>å½“å‰é€‰æ‹©: {{ selectorRange[selectorIndex] }}</view>
    </picker>

    <!-- switch å¼€å…³ -->
    <switch checked @change="switchChange" />
  </view>
</template>

<script setup>
import { ref, reactive } from 'vue'

const formData = reactive({
  username: '',
  desc: '',
  radio: 'male',
  checklist: [],
  switch: false,
  slider: 50
})

const radioItems = [
  { value: 'male', name: 'ç”·' },
  { value: 'female', name: 'å¥³' }
]

const checkboxItems = [
  { value: 'apple', name: 'è‹¹æœ' },
  { value: 'banana', name: 'é¦™è•‰' },
  { value: 'orange', name: 'æ©˜å­' }
]

const selectorRange = ['é€‰é¡¹1', 'é€‰é¡¹2', 'é€‰é¡¹3']
const selectorIndex = ref(0)

function handleClick() {
  uni.showToast({
    title: 'æŒ‰é’®è¢«ç‚¹å‡»',
    icon: 'success'
  })
}

function onInputConfirm(e) {
  console.log('è¾“å…¥ç¡®è®¤:', e.detail.value)
}

function onTextareaInput(e) {
  console.log('è¾“å…¥å†…å®¹:', e.detail.value)
}

function onRadioChange(e) {
  formData.radio = e.detail.value
}

function onCheckboxChange(e) {
  formData.checklist = e.detail.value
}

function onSwitchChange(e) {
  formData.switch = e.detail.value
}

function onSliderChange(e) {
  formData.slider = e.detail.value
}

function onPickerChange(e) {
  selectorIndex.value = e.detail.value
}

function switchChange(e) {
  console.log('å¼€å…³çŠ¶æ€:', e.detail.value)
}
</script>
```

#### å¸¸ç”¨API

**ç½‘ç»œè¯·æ±‚API**

```javascript
// uni.request å‘èµ·ç½‘ç»œè¯·æ±‚
uni.request({
  url: 'https://api.example.com/data',
  method: 'GET',
  data: {
    id: 1
  },
  header: {
    'Authorization': 'Bearer token'
  },
  success: (res) => {
    console.log('è¯·æ±‚æˆåŠŸ:', res.data)
  },
  fail: (err) => {
    console.error('è¯·æ±‚å¤±è´¥:', err)
  }
})

// async/await æ–¹å¼
async function fetchData() {
  try {
    const res = await uni.request({
      url: 'https://api.example.com/data',
      method: 'GET'
    })
    console.log('æ•°æ®:', res.data)
  } catch (err) {
    console.error('é”™è¯¯:', err)
  }
}

// uni.uploadFile ä¸Šä¼ æ–‡ä»¶
uni.uploadFile({
  url: 'https://api.example.com/upload',
  filePath: tempFilePath,
  name: 'file',
  formData: {
    user: 'test'
  },
  success: (res) => {
    const data = JSON.parse(res.data)
    console.log('ä¸Šä¼ æˆåŠŸ:', data.url)
  }
})

// uni.downloadFile ä¸‹è½½æ–‡ä»¶
uni.downloadFile({
  url: 'https://example.com/file.pdf',
  success: (res) => {
    if (res.statusCode === 200) {
      console.log('ä¸‹è½½æˆåŠŸ:', res.tempFilePath)
    }
  }
})
```

**æ•°æ®ç¼“å­˜API**

```javascript
// uni.setStorage å¼‚æ­¥å­˜å‚¨
uni.setStorage({
  key: 'userInfo',
  data: {
    name: 'å¼ ä¸‰',
    age: 25
  },
  success: () => {
    console.log('å­˜å‚¨æˆåŠŸ')
  }
})

// uni.getStorage å¼‚æ­¥è·å–
uni.getStorage({
  key: 'userInfo',
  success: (res) => {
    console.log('è·å–çš„æ•°æ®:', res.data)
  }
})

// åŒæ­¥å­˜å‚¨
try {
  uni.setStorageSync('token', 'abc123')
  const token = uni.getStorageSync('token')
  console.log('token:', token)
} catch (e) {
  console.error('å­˜å‚¨å¤±è´¥')
}

// uni.removeStorage åˆ é™¤
uni.removeStorage({
  key: 'userInfo',
  success: () => {
    console.log('åˆ é™¤æˆåŠŸ')
  }
})

// uni.clearStorage æ¸…ç©ºæ‰€æœ‰
uni.clearStorage()
```

**è·¯ç”±è·³è½¬API**

```javascript
// uni.navigateTo ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢
uni.navigateTo({
  url: '/pages/detail/detail?id=1&name=uniapp'
})

// uni.redirectTo å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢
uni.redirectTo({
  url: '/pages/login/login'
})

// uni.reLaunch å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢
uni.reLaunch({
  url: '/pages/index/index'
})

// uni.switchTab è·³è½¬åˆ°tabBaré¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰étabBaré¡µé¢
uni.switchTab({
  url: '/pages/index/index'
})

// uni.navigateBack è¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢
uni.navigateBack({
  delta: 1
})

// è·å–é¡µé¢å‚æ•°
onLoad((options) => {
  console.log('é¡µé¢å‚æ•°:', options.id, options.name)
})
```

**ç•Œé¢äº¤äº’API**

```javascript
// uni.showToast æ˜¾ç¤ºæ¶ˆæ¯æç¤ºæ¡†
uni.showToast({
  title: 'æ“ä½œæˆåŠŸ',
  icon: 'success',
  duration: 2000
})

// uni.hideToast éšè—æç¤ºæ¡†
uni.hideToast()

// uni.showLoading æ˜¾ç¤ºloadingæç¤ºæ¡†
uni.showLoading({
  title: 'åŠ è½½ä¸­...'
})

// uni.hideLoading éšè—loading
uni.hideLoading()

// uni.showModal æ˜¾ç¤ºæ¨¡æ€å¯¹è¯æ¡†
uni.showModal({
  title: 'æç¤º',
  content: 'ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ',
  success: (res) => {
    if (res.confirm) {
      console.log('ç”¨æˆ·ç‚¹å‡»ç¡®å®š')
    } else if (res.cancel) {
      console.log('ç”¨æˆ·ç‚¹å‡»å–æ¶ˆ')
    }
  }
})

// uni.showActionSheet æ˜¾ç¤ºæ“ä½œèœå•
uni.showActionSheet({
  itemList: ['æ‹ç…§', 'ä»ç›¸å†Œé€‰æ‹©'],
  success: (res) => {
    console.log('é€‰ä¸­äº†ç¬¬' + (res.tapIndex + 1) + 'ä¸ªæŒ‰é’®')
  },
  fail: (res) => {
    console.log('ç”¨æˆ·å–æ¶ˆ')
  }
})
```

#### æ¡ä»¶ç¼–è¯‘

**ä½¿ç”¨æ¡ä»¶ç¼–è¯‘å®ç°è·¨ç«¯å·®å¼‚åŒ–**

```vue
<template>
  <view>
    <!-- #ifdef H5 -->
    <view>H5å¹³å°æ˜¾ç¤º</view>
    <!-- #endif -->

    <!-- #ifdef MP-WEIXIN -->
    <view>å¾®ä¿¡å°ç¨‹åºæ˜¾ç¤º</view>
    <!-- #endif -->

    <!-- #ifdef APP-PLUS -->
    <view>Appæ˜¾ç¤º</view>
    <!-- #endif -->

    <!-- #ifndef H5 -->
    <view>é™¤äº†H5å¹³å°éƒ½æ˜¾ç¤º</view>
    <!-- #endif -->
  </view>
</template>

<script setup>
// æ¡ä»¶ç¼–è¯‘
// #ifdef H5
console.log('è¿™æ˜¯H5å¹³å°çš„ä»£ç ')
// #endif

// #ifdef MP-WEIXIN
console.log('è¿™æ˜¯å¾®ä¿¡å°ç¨‹åºçš„ä»£ç ')
// #endif

// #ifdef APP-PLUS
console.log('è¿™æ˜¯Appçš„ä»£ç ')
// #endif

function getPlatformInfo() {
  // #ifdef H5
  return 'H5'
  // #endif

  // #ifdef MP-WEIXIN
  return 'å¾®ä¿¡å°ç¨‹åº'
  // #endif

  // #ifdef APP-PLUS
  return 'App'
  // #endif
}
</script>

<style>
/* æ¡ä»¶ç¼–è¯‘æ ·å¼ */
/* #ifdef H5 */
.h5-only {
  color: red;
}
/* #endif */

/* #ifdef MP-WEIXIN */
.mp-only {
  color: green;
}
/* #endif */
</style>
```

**APIæ¡ä»¶ç¼–è¯‘**

```javascript
// è·å–ç³»ç»Ÿä¿¡æ¯
function getSystemInfo() {
  // #ifdef APP-PLUS
  return plus.device.model
  // #endif

  // #ifdef H5
  return navigator.userAgent
  // #endif

  // #ifdef MP-WEIXIN
  const res = uni.getSystemInfoSync()
  return res.model
  // #endif
}
```

---

### ç»„ä»¶å¼€å‘

#### åˆ›å»ºç»„ä»¶

**ç»„ä»¶å®šä¹‰**

```vue
<!-- components/user-card/user-card.vue -->
<template>
  <view class="user-card" @click="onClick">
    <image class="avatar" :src="user.avatar" mode="aspectFill" />
    <view class="info">
      <text class="name">{{ user.name }}</text>
      <text class="desc">{{ user.desc }}</text>
    </view>
  </view>
</template>

<script setup>
import { defineProps, defineEmits } from 'vue'

const props = defineProps({
  user: {
    type: Object,
    required: true,
    default: () => ({
      avatar: '',
      name: '',
      desc: ''
    })
  }
})

const emit = defineEmits(['click'])

function onClick() {
  emit('click', props.user)
}
</script>

<style scoped>
.user-card {
  display: flex;
  padding: 20rpx;
  background: #fff;
  border-radius: 16rpx;
}

.avatar {
  width: 100rpx;
  height: 100rpx;
  border-radius: 50%;
}

.info {
  margin-left: 20rpx;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.name {
  font-size: 32rpx;
  font-weight: bold;
}

.desc {
  font-size: 28rpx;
  color: #999;
  margin-top: 10rpx;
}
</style>
```

**ä½¿ç”¨ç»„ä»¶**

```vue
<template>
  <view>
    <user-card
      :user="userData"
      @click="handleUserClick"
    />
  </view>
</template>

<script setup>
import UserCard from '@/components/user-card/user-card.vue'

const userData = {
  avatar: '/static/avatar.png',
  name: 'å¼ ä¸‰',
  desc: 'å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ'
}

function handleUserClick(user) {
  console.log('ç‚¹å‡»äº†ç”¨æˆ·:', user)
}
</script>
```

#### æ’æ§½ä½¿ç”¨

```vue
<!-- components/popup/popup.vue -->
<template>
  <view class="popup" v-if="show" @click="close">
    <view class="popup-content" @click.stop>
      <view class="header">
        <text>{{ title }}</text>
        <text class="close" @click="close">Ã—</text>
      </view>
      <view class="body">
        <slot name="content">
          é»˜è®¤å†…å®¹
        </slot>
      </view>
      <view class="footer">
        <slot name="footer">
          <button @click="close">å…³é—­</button>
        </slot>
      </view>
    </view>
  </view>
</template>

<script setup>
import { defineProps, defineEmits } from 'vue'

const props = defineProps({
  show: Boolean,
  title: String
})

const emit = defineEmits(['close'])

function close() {
  emit('close')
}
</script>

<!-- ä½¿ç”¨ç»„ä»¶ -->
<template>
  <view>
    <button @click="showPopup = true">æ˜¾ç¤ºå¼¹çª—</button>

    <popup :show="showPopup" title="æç¤º" @close="showPopup = false">
      <template #content>
        <view>è¿™æ˜¯è‡ªå®šä¹‰å†…å®¹</view>
      </template>
      <template #footer>
        <button @click="confirm">ç¡®å®š</button>
      </template>
    </popup>
  </view>
</template>
```

---

### çŠ¶æ€ç®¡ç†

#### ä½¿ç”¨Piniaï¼ˆVue3ï¼‰

**å®‰è£…é…ç½®**

```bash
npm install pinia
```

```javascript
// store/index.js
import { createPinia } from 'pinia'

const pinia = createPinia()

export default pinia
```

**å®šä¹‰Store**

```javascript
// store/user.js
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: null,
    token: ''
  }),

  getters: {
    isLogin: (state) => !!state.token
  },

  actions: {
    setUserInfo(info) {
      this.userInfo = info
    },

    setToken(token) {
      this.token = token
      // æŒä¹…åŒ–
      uni.setStorageSync('token', token)
    },

    async login(params) {
      try {
        const res = await uni.request({
          url: '/api/login',
          method: 'POST',
          data: params
        })

        this.setToken(res.data.token)
        this.setUserInfo(res.data.userInfo)

        return res.data
      } catch (error) {
        throw error
      }
    },

    logout() {
      this.userInfo = null
      this.token = ''
      uni.removeStorageSync('token')
    }
  }
})
```

**ä½¿ç”¨Store**

```vue
<template>
  <view>
    <text v-if="userStore.isLogin">{{ userStore.userInfo.name }}</text>
    <text v-else>æœªç™»å½•</text>
    <button @click="handleLogin">ç™»å½•</button>
  </view>
</template>

<script setup>
import { useUserStore } from '@/store/user'

const userStore = useUserStore()

async function handleLogin() {
  await userStore.login({
    username: 'test',
    password: '123456'
  })
}
</script>
```

---

### uni-appå®æˆ˜æ¡ˆä¾‹

#### å¾…åŠäº‹é¡¹åº”ç”¨

**é¡¹ç›®ç»“æ„**

```
todo-app/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â””â”€â”€ index.vue          # ä¸»é¡µ
â”‚   â”œâ”€â”€ add/
â”‚   â”‚   â””â”€â”€ add.vue            # æ·»åŠ é¡µ
â”‚   â””â”€â”€ detail/
â”‚       â””â”€â”€ detail.vue          # è¯¦æƒ…é¡µ
â”œâ”€â”€ components/
â”‚   â””â”€â”€ todo-item/
â”‚       â””â”€â”€ todo-item.vue      # å¾…åŠé¡¹ç»„ä»¶
â”œâ”€â”€ store/
â”‚   â””â”€â”€ todo.js                # å¾…åŠçŠ¶æ€
â”œâ”€â”€ static/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ App.vue
â”œâ”€â”€ main.js
â”œâ”€â”€ manifest.json
â””â”€â”€ pages.json
```

**Storeå®šä¹‰**

```javascript
// store/todo.js
import { defineStore } from 'pinia'

export const useTodoStore = defineStore('todo', {
  state: () => ({
    todos: [],
    filter: 'all' // all, active, completed
  }),

  getters: {
    filteredTodos(state) {
      switch (state.filter) {
        case 'active':
          return state.todos.filter(todo => !todo.completed)
        case 'completed':
          return state.todos.filter(todo => todo.completed)
        default:
          return state.todos
      }
    },

    stats(state) {
      return {
        total: state.todos.length,
        active: state.todos.filter(t => !t.completed).length,
        completed: state.todos.filter(t => t.completed).length
      }
    }
  },

  actions: {
    addTodo(title) {
      const todo = {
        id: Date.now(),
        title,
        completed: false,
        createdAt: new Date().toISOString()
      }
      this.todos.unshift(todo)
      this.saveTodos()
    },

    toggleTodo(id) {
      const todo = this.todos.find(t => t.id === id)
      if (todo) {
        todo.completed = !todo.completed
        this.saveTodos()
      }
    },

    deleteTodo(id) {
      this.todos = this.todos.filter(t => t.id !== id)
      this.saveTodos()
    },

    setFilter(filter) {
      this.filter = filter
    },

    loadTodos() {
      const todos = uni.getStorageSync('todos')
      if (todos) {
        this.todos = JSON.parse(todos)
      }
    },

    saveTodos() {
      uni.setStorageSync('todos', JSON.stringify(this.todos))
    }
  }
})
```

**ä¸»é¡µé¢**

```vue
<!-- pages/index/index.vue -->
<template>
  <view class="container">
    <view class="header">
      <text class="title">å¾…åŠäº‹é¡¹</text>
      <view class="stats">
        <text>{{ todoStore.stats.active }} å¾…å®Œæˆ</text>
      </view>
    </view>

    <!-- è¿‡æ»¤å™¨ -->
    <view class="filters">
      <view
        v-for="item in filters"
        :key="item.value"
        class="filter-item"
        :class="{ active: todoStore.filter === item.value }"
        @click="todoStore.setFilter(item.value)"
      >
        {{ item.label }}
      </view>
    </view>

    <!-- åˆ—è¡¨ -->
    <view class="list">
      <todo-item
        v-for="todo in todoStore.filteredTodos"
        :key="todo.id"
        :todo="todo"
        @toggle="todoStore.toggleTodo(todo.id)"
        @delete="todoStore.deleteTodo(todo.id)"
        @click="goToDetail(todo)"
      />
    </view>

    <!-- æ·»åŠ æŒ‰é’® -->
    <view class="add-btn" @click="goToAdd">
      <text class="icon">+</text>
    </view>
  </view>
</template>

<script setup>
import { onMounted } from 'vue'
import { useTodoStore } from '@/store/todo'
import TodoItem from '@/components/todo-item/todo-item.vue'

const todoStore = useTodoStore()

const filters = [
  { label: 'å…¨éƒ¨', value: 'all' },
  { label: 'è¿›è¡Œä¸­', value: 'active' },
  { label: 'å·²å®Œæˆ', value: 'completed' }
]

onMounted(() => {
  todoStore.loadTodos()
})

function goToAdd() {
  uni.navigateTo({
    url: '/pages/add/add'
  })
}

function goToDetail(todo) {
  uni.navigateTo({
    url: `/pages/detail/detail?id=${todo.id}`
  })
}
</script>

<style scoped>
.container {
  padding: 20rpx;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40rpx;
}

.title {
  font-size: 48rpx;
  font-weight: bold;
}

.filters {
  display: flex;
  margin-bottom: 20rpx;
}

.filter-item {
  padding: 10rpx 20rpx;
  margin-right: 20rpx;
  border-radius: 20rpx;
  background: #f5f5f5;
}

.filter-item.active {
  background: #007aff;
  color: #fff;
}

.add-btn {
  position: fixed;
  right: 40rpx;
  bottom: 40rpx;
  width: 100rpx;
  height: 100rpx;
  border-radius: 50%;
  background: #007aff;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4rpx 20rpx rgba(0, 122, 255, 0.4);
}

.icon {
  font-size: 60rpx;
  color: #fff;
  line-height: 1;
}
</style>
```

**å¾…åŠé¡¹ç»„ä»¶**

```vue
<!-- components/todo-item/todo-item.vue -->
<template>
  <view class="todo-item" @click="onClick">
    <view class="checkbox" @click.stop="onToggle">
      <text v-if="todo.completed" class="check-icon">âœ“</text>
    </view>
    <view class="content">
      <text class="title" :class="{ completed: todo.completed }">
        {{ todo.title }}
      </text>
      <text class="time">{{ formatTime(todo.createdAt) }}</text>
    </view>
    <view class="delete" @click.stop="onDelete">
      <text>ğŸ—‘ï¸</text>
    </view>
  </view>
</template>

<script setup>
import { defineProps, defineEmits } from 'vue'

const props = defineProps({
  todo: {
    type: Object,
    required: true
  }
})

const emit = defineEmits(['toggle', 'delete', 'click'])

function onToggle() {
  emit('toggle', props.todo.id)
}

function onDelete() {
  uni.showModal({
    title: 'æç¤º',
    content: 'ç¡®å®šåˆ é™¤è¿™ä¸ªå¾…åŠå—ï¼Ÿ',
    success: (res) => {
      if (res.confirm) {
        emit('delete', props.todo.id)
      }
    }
  })
}

function onClick() {
  emit('click', props.todo)
}

function formatTime(time) {
  const date = new Date(time)
  return `${date.getMonth() + 1}/${date.getDate()}`
}
</script>

<style scoped>
.todo-item {
  display: flex;
  align-items: center;
  padding: 30rpx;
  background: #fff;
  border-radius: 16rpx;
  margin-bottom: 20rpx;
}

.checkbox {
  width: 40rpx;
  height: 40rpx;
  border: 2rpx solid #ddd;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 20rpx;
}

.check-icon {
  color: #007aff;
  font-size: 24rpx;
}

.content {
  flex: 1;
}

.title {
  font-size: 32rpx;
}

.title.completed {
  text-decoration: line-through;
  color: #999;
}

.time {
  font-size: 24rpx;
  color: #999;
  margin-top: 10rpx;
}

.delete {
  font-size: 40rpx;
  margin-left: 20rpx;
}
</style>
```

---

### å‘å¸ƒåˆ°å¤šç«¯

#### å‘å¸ƒåˆ°H5

```bash
# è¿è¡ŒH5
npm run dev:h5

# æ„å»ºH5
npm run build:h5

# ç”Ÿæˆçš„æ–‡ä»¶åœ¨ dist/build/h5 ç›®å½•
```

#### å‘å¸ƒåˆ°å¾®ä¿¡å°ç¨‹åº

```bash
# è¿è¡Œå¾®ä¿¡å°ç¨‹åº
npm run dev:mp-weixin

# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:mp-weixin

# ç”Ÿæˆçš„æ–‡ä»¶åœ¨ dist/build/mp-weixin ç›®å½•
```

**å‘å¸ƒæ­¥éª¤ï¼š**

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›®ï¼Œé€‰æ‹© `dist/build/mp-weixin` ç›®å½•
3. å¡«å†™AppID
4. é¢„è§ˆæµ‹è¯•
5. ä¸Šä¼ ä»£ç 
6. æäº¤å®¡æ ¸

#### å‘å¸ƒåˆ°App

**äº‘ç«¯æ‰“åŒ…ï¼š**

```
1. æ‰“å¼€HBuilderX
2. å‘è¡Œ â†’ åŸç”ŸApp-äº‘æ‰“åŒ…
3. é…ç½®:
   - åº”ç”¨åç§°
   - åº”ç”¨ç‰ˆæœ¬å·
   - åº”ç”¨å›¾æ ‡
   - å¯åŠ¨é¡µé…ç½®
4. é€‰æ‹©æ‰“åŒ…å¹³å°ï¼ˆAndroid/iOSï¼‰
5. ç‚¹å‡»æ‰“åŒ…
```

**æœ¬åœ°æ‰“åŒ…ï¼š**

```bash
# éœ€è¦å®‰è£… Android SDK æˆ– Xcode
# é…ç½®ç­¾åè¯ä¹¦
# ä½¿ç”¨ DCloud æä¾›çš„æœ¬åœ°æ‰“åŒ…SDK
```

#### æ¡ä»¶ç¼–è¯‘ä¼˜åŒ–

```vue
<template>
  <view>
    <!-- H5ç‰¹æœ‰åŠŸèƒ½ -->
    <!-- #ifdef H5 -->
    <web-view src="https://www.example.com"></web-view>
    <!-- #endif -->

    <!-- å°ç¨‹åºç‰¹æœ‰åŠŸèƒ½ -->
    <!-- #ifdef MP-WEIXIN -->
    <button open-type="getUserInfo" @getuserinfo="getUserInfo">
      è·å–ç”¨æˆ·ä¿¡æ¯
    </button>
    <!-- #endif -->

    <!-- Appç‰¹æœ‰åŠŸèƒ½ -->
    <!-- #ifdef APP-PLUS -->
    <button @click="scanCode">æ‰«ç </button>
    <!-- #endif -->
  </view>
</template>

<script setup>
// #ifdef APP-PLUS
function scanCode() {
  plus.barcode.scan(
    '',
    (type, result) => {
      console.log('æ‰«ç ç»“æœ:', result)
    },
    (error) => {
      console.error('æ‰«ç å¤±è´¥:', error)
    }
  )
}
// #endif
</script>
```

---

### uni-appåˆ†åŒ…åŠ è½½ä¼˜åŒ–

#### ä¸ºä»€ä¹ˆéœ€è¦åˆ†åŒ…

**å°ç¨‹åºé™åˆ¶ï¼š**

```
å¾®ä¿¡å°ç¨‹åºåŒ…å¤§å°é™åˆ¶:
- ä¸»åŒ…: 2MB
- æ•´ä¸ªå°ç¨‹åº: æ‰€æœ‰åˆ†åŒ…å¤§å°ä¸è¶…è¿‡ 20MB
- å•ä¸ªåˆ†åŒ…: 2MB

æ”¯ä»˜å®å°ç¨‹åºåŒ…å¤§å°é™åˆ¶:
- ä¸»åŒ…: 2MB
- æ•´ä¸ªå°ç¨‹åº: æ‰€æœ‰åˆ†åŒ…å¤§å°ä¸è¶…è¿‡ 20MB

å…¶ä»–å¹³å°ç±»ä¼¼é™åˆ¶...
```

**åˆ†åŒ…çš„ä½œç”¨ï¼š**
- âœ… å‡å°ä¸»åŒ…ä½“ç§¯ï¼ŒåŠ å¿«é¦–å±åŠ è½½
- âœ… æŒ‰éœ€åŠ è½½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- âœ… ä¸šåŠ¡æ¨¡å—åˆ†ç¦»ï¼Œä¾¿äºå›¢é˜Ÿåä½œ
- âœ… ç‹¬ç«‹æ›´æ–°ï¼Œå‡å°‘å‘ç‰ˆå½±å“

#### åˆ†åŒ…é…ç½®è¯¦è§£

**åŸºç¡€é…ç½®**

```json
// pages.json
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ"
      }
    },
    {
      "path": "pages/category/category",
      "style": {
        "navigationBarTitleText": "åˆ†ç±»"
      }
    },
    {
      "path": "pages/cart/cart",
      "style": {
        "navigationBarTitleText": "è´­ç‰©è½¦"
      }
    }
  ],

  // åˆ†åŒ…é…ç½®
  "subPackages": [
    {
      "root": "pages/user",        // åˆ†åŒ…æ ¹ç›®å½•
      "name": "user",             // åˆ†åŒ…åˆ«åï¼ˆæ”¯ä»˜å®å°ç¨‹åºéœ€è¦ï¼‰
      "pages": [
        {
          "path": "profile/profile",   // é¡µé¢è·¯å¾„
          "style": {
            "navigationBarTitleText": "ä¸ªäººä¸­å¿ƒ"
          }
        },
        {
          "path": "settings/settings",
          "style": {
            "navigationBarTitleText": "è®¾ç½®"
          }
        },
        {
          "path": "address/address",
          "style": {
            "navigationBarTitleText": "æ”¶è´§åœ°å€"
          }
        }
      ]
    },
    {
      "root": "pages/order",
      "name": "order",
      "pages": [
        {
          "path": "list/list",
          "style": {
            "navigationBarTitleText": "æˆ‘çš„è®¢å•"
          }
        },
        {
          "path": "detail/detail",
          "style": {
            "navigationBarTitleText": "è®¢å•è¯¦æƒ…"
          }
        },
        {
          "path": "aftersale/aftersale",
          "style": {
            "navigationBarTitleText": "å”®å"
          }
        }
      ]
    },
    {
      "root": "pages/product",
      "name": "product",
      "pages": [
        {
          "path": "list/list",
          "style": {
            "navigationBarTitleText": "å•†å“åˆ—è¡¨"
          }
        },
        {
          "path": "detail/detail",
          "style": {
            "navigationBarTitleText": "å•†å“è¯¦æƒ…"
          }
        },
        {
          "path": "search/search",
          "style": {
            "navigationBarTitleText": "æœç´¢"
          }
        }
      ]
    }
  ],

  // åˆ†åŒ…é¢„ä¸‹è½½é…ç½®
  "preloadRule": {
    "pages/index/index": {
      "network": "all",           // all: åœ¨æ‰€æœ‰ç½‘ç»œä¸‹é¢„ä¸‹è½½
      "packages": ["pages/user"]    // é¢„ä¸‹è½½ user åˆ†åŒ…
    },
    "pages/category/category": {
      "network": "wifi",          // wifi: ä»…åœ¨WiFiä¸‹é¢„ä¸‹è½½
      "packages": ["pages/product"]
    },
    "pages/cart/cart": {
      "network": "all",
      "packages": ["pages_order"]    // æ³¨æ„ï¼šåˆ†åŒ…åä¸èƒ½åŒ…å«è·¯å¾„åˆ†éš”ç¬¦
    }
  }
}
```

#### åˆ†åŒ…æœ€ä½³å®è·µ

**1. åˆ†åŒ…åŸåˆ™**

```
ä¸»åŒ…ï¼ˆpagesï¼‰ï¼š
- TabBar é¡µé¢
- é¦–é¡µ/å¯åŠ¨é¡µ
- å¿…é¡»ç«‹å³åŠ è½½çš„é¡µé¢

åˆ†åŒ…ï¼ˆsubPackagesï¼‰ï¼š
- ç‹¬ç«‹ä¸šåŠ¡æ¨¡å—
- ä½é¢‘ä½¿ç”¨çš„é¡µé¢
- å¯ä»¥å»¶è¿ŸåŠ è½½çš„é¡µé¢
```

**2. åˆ†åŒ…å¤§å°æ§åˆ¶**

```javascript
// æŸ¥çœ‹åˆ†åŒ…å¤§å°
// å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ è¯¦æƒ… â†’ åŸºæœ¬ä¿¡æ¯
// æˆ– HBuilderX å‘è¡Œ â†’ å°ç¨‹åº-æŸ¥çœ‹åˆ†åŒ…å¤§å°

// ç›®æ ‡ï¼š
// - ä¸»åŒ… < 1.5MBï¼ˆç•™ç¼“å†²ï¼‰
// - å•ä¸ªåˆ†åŒ… < 1.8MB
```

**3. åˆ†åŒ…é¡µé¢è·³è½¬**

```javascript
// è·³è½¬åˆ°åˆ†åŒ…é¡µé¢
uni.navigateTo({
  url: '/pages/user/profile/profile'
})

// ä½¿ç”¨åˆ†åŒ…åˆ«åï¼ˆæ”¯ä»˜å®å°ç¨‹åºï¼‰
uni.navigateTo({
  url: '/user/pages/profile/profile'
})

// åˆ†åŒ…é¢„ä¸‹è½½ï¼ˆä¸»åŠ¨è§¦å‘ï¼‰
uni.preloadPage({
  url: '/pages/user/profile/profile'
})
```

#### ç‹¬ç«‹åˆ†åŒ…ï¼ˆå¾®ä¿¡å°ç¨‹åºï¼‰

**ä»€ä¹ˆæ˜¯ç‹¬ç«‹åˆ†åŒ…ï¼š**

ç‹¬ç«‹åˆ†åŒ…æ˜¯å¾®ä¿¡å°ç¨‹åºç‰¹æœ‰çš„ä¼˜åŒ–æ–¹å¼ï¼Œç‹¬ç«‹åˆ†åŒ…å½¼æ­¤ä¹‹é—´ã€ç‹¬ç«‹åˆ†åŒ…å’Œä¸»åŒ…ä¹‹é—´**äº’ä¸ä¾èµ–**ã€‚

```json
// pages.json
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": { }
    }
  ],
  "subPackages": [
    {
      "root": "pages/user",
      "pages": [
        {
          "path": "profile/profile",
          "style": { }
        }
      ],
      "independent": true  // å¼€å¯ç‹¬ç«‹åˆ†åŒ…
    }
  ]
}
```

**ç‹¬ç«‹åˆ†åŒ…çš„é™åˆ¶ï¼š**

```
âœ… ä¼˜åŠ¿ï¼š
- ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–ä¸»åŒ…
- æ›´å¿«çš„åŠ è½½é€Ÿåº¦
- ä¸šåŠ¡éš”ç¦»

âŒ é™åˆ¶ï¼š
- ä¸èƒ½è®¿é—®ä¸»åŒ…çš„ç»„ä»¶
- ä¸èƒ½è®¿é—®ä¸»åŒ…çš„èµ„æº
- ä¸èƒ½ä½¿ç”¨ uni.navigateTo è·³è½¬åˆ°ä¸»åŒ…é¡µé¢
- éœ€è¦ç‹¬ç«‹å¼•å…¥æ‰€æœ‰ä¾èµ–
```

**ç‹¬ç«‹åˆ†åŒ…é…ç½®ç¤ºä¾‹ï¼š**

```vue
<!-- pages/user/profile/profile.vue -->
<template>
  <view>
    <!-- å¿…é¡»è‡ªå·±å¼•å…¥æ‰€æœ‰ç»„ä»¶ -->
    <user-info :user="userInfo" />
  </view>
</template>

<script setup>
// ç‹¬ç«‹åˆ†åŒ…å¿…é¡»è‡ªå·±å¼•å…¥æ‰€æœ‰ä¾èµ–
import UserInfo from '@/components/user-info/user-info.vue'

const userInfo = ref({
  name: 'å¼ ä¸‰'
})
</script>
```

#### åˆ†åŒ…ä¼˜åŒ–æŠ€å·§

**1. å…¬å…±ç»„ä»¶æå–**

```
é—®é¢˜ï¼šå¤šä¸ªåˆ†åŒ…éƒ½ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶ï¼Œå¯¼è‡´ä½“ç§¯å¢å¤§

è§£å†³ï¼šä½¿ç”¨ uni_modules æˆ– æ’ä»¶å¸‚åœº
```

**2. åˆ†åŒ…é¢„ä¸‹è½½ç­–ç•¥**

```javascript
// åœºæ™¯1ï¼šé«˜é¢‘ä½¿ç”¨çš„åˆ†åŒ…ç«‹å³é¢„ä¸‹è½½
"preloadRule": {
  "pages/index/index": {
    "network": "all",
    "packages": ["pages/user", "pages/order"]
  }
}

// ï¿½æ™¯2ï¼šWiFiä¸‹é¢„ä¸‹è½½å¤§ä½“ç§¯åˆ†åŒ…
"preloadRule": {
  "pages/index/index": {
    "network": "wifi",
    "packages": ["pages_product"]
  }
}

// åœºæ™¯3ï¼šç”¨æˆ·ç™»å½•åé¢„ä¸‹è½½ä¸ªäººä¸­å¿ƒ
// åœ¨ç™»å½•æˆåŠŸå
uni.preloadPage({
  url: '/pages/user/profile/profile'
})
```

**3. åˆ†åŒ…ä½“ç§¯ä¼˜åŒ–**

```javascript
// 1. æŒ‰ä¸šåŠ¡æ¨¡å—åˆ†åŒ…ï¼Œè€Œä¸æ˜¯æŒ‰é¡µé¢åˆ†åŒ…
// âŒ ä¸å¥½ï¼šæ¯ä¸ªé¡µé¢éƒ½æ˜¯åˆ†åŒ…
subPackages: [
  { root: 'pages/order-detail', pages: [{ path: '1/1' }, { path: '2/2' }] },
  { root: 'pages-order-list', pages: [{ path: 'list/list' }] }
]

// âœ… å¥½ï¼šæ•´ä¸ªè®¢å•æ¨¡å—ä¸€ä¸ªåˆ†åŒ…
subPackages: [
  {
    root: 'pages/order',
    pages: [
      { path: 'detail/detail' },
      { path: 'list/list' },
      { path: 'aftersale/aftersale' }
    ]
  }
]

// 2. ä½¿ç”¨åˆ†åŒ…æ ¹ç›®å½•çš„ç‹¬ç«‹èµ„æº
static/
â”œâ”€â”€ common/              # å…¬å…±èµ„æº
â”œâ”€â”€ user/                # useråˆ†åŒ…ä¸“ç”¨
â””â”€â”€ order/               # orderåˆ†åŒ…ä¸“ç”¨
```

**4. åˆ†åŒ…è°ƒè¯•**

```javascript
// æŸ¥çœ‹åˆ†åŒ…åŠ è½½æƒ…å†µ
console.log('åˆ†åŒ…åŠ è½½ä¿¡æ¯:', {
  packages: __uniConfigPackages,
  pages: __uniConfigPages
})

// åœ¨å¼€å‘å·¥å…·ä¸­æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
// å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ Network
// æŸ¥çœ‹å„ä¸ª .js æ–‡ä»¶çš„åŠ è½½æ—¶é—´å’Œå¤§å°
```

#### åˆ†åŒ…å¸¸è§é—®é¢˜

**é—®é¢˜1ï¼šåˆ†åŒ…é¡µé¢è·³è½¬å¤±è´¥**

```javascript
// âŒ é”™è¯¯ï¼šè·¯å¾„é”™è¯¯
uni.navigateTo({
  url: '/pages/profile/profile'  // ä¸»åŒ…é¡µé¢è·¯å¾„
})

// âœ… æ­£ç¡®ï¼šå®Œæ•´è·¯å¾„
uni.navigateTo({
  url: '/pages/user/profile/profile'  // åŒ…å«åˆ†åŒ…æ ¹ç›®å½•
})
```

**é—®é¢˜2ï¼šåˆ†åŒ…ä½“ç§¯è¿‡å¤§**

```json
// è§£å†³æ–¹æ¡ˆï¼šè¿›ä¸€æ­¥ç»†åˆ†åˆ†åŒ…
{
  "subPackages": [
    {
      "root": "pages/order",
      "pages": [/* ... */]
    },
    {
      "root": "pages/order-detail",
      "pages": [/* ... */]
    }
  ]
}
```

**é—®é¢˜3ï¼šåˆ†åŒ…èµ„æºè·¯å¾„é”™è¯¯**

```javascript
// âŒ é”™è¯¯ï¼šåˆ†åŒ…è·¯å¾„é—®é¢˜
const imageSrc = '/static/logo.png'  // ä¸»åŒ…èµ„æº

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–åˆ†åŒ…å†…èµ„æº
const imageSrc = '@/static/logo.png'  // åˆ«åè·¯å¾„
// æˆ–è€…å°†èµ„æºæ”¾åˆ°åˆ†åŒ…å¯¹åº”çš„staticç›®å½•
```

**é—®é¢˜4ï¼šç‹¬ç«‹åˆ†åŒ…ç»„ä»¶å¼•ç”¨å¤±è´¥**

```javascript
// ç‹¬ç«‹åˆ†åŒ…ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ä¸»åŒ…çš„ç»„ä»¶
// è§£å†³æ–¹æ¡ˆï¼š

// æ–¹æ¡ˆ1ï¼šå…³é—­ç‹¬ç«‹åˆ†åŒ…ï¼ˆä¸æ¨èï¼‰
"independent": false

// æ–¹æ¡ˆ2ï¼šåœ¨åˆ†åŒ…ä¸­ä¹Ÿå¼•å…¥ç»„ä»¶
// pages/user/components/user-card/user-card.vue
import UserCard from '@/components/user-card/user-card.vue'

// æ–¹æ¡ˆ3ï¼šä½¿ç”¨uni_modulesï¼ˆæ¨èï¼‰
// uni_modules/user-card/components/user-card/user-card.vue
```

---

### å…¶ä»–æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### å›¾ç‰‡ä¼˜åŒ–

```vue
<template>
  <view>
    <!-- ä½¿ç”¨æ‡’åŠ è½½ -->
    <image
      :src="imageUrl"
      lazy-load
      mode="aspectFill"
    />

    <!-- ä½¿ç”¨webpæ ¼å¼ -->
    <image src="/static/image.webp" />

    <!-- æŒ‰éœ€åŠ è½½ -->
    <image v-if="showImage" :src="imageUrl" />
  </view>
</template>
```

**2. åˆ†åŒ…åŠ è½½**

```json
// pages.json
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": { }
    }
  ],
  "subPackages": [
    {
      "root": "pages/user",
      "pages": [
        {
          "path": "profile/profile",
          "style": { }
        }
      ]
    },
    {
      "root": "pages/order",
      "pages": [
        {
          "path": "list/list",
          "style": { }
        }
      ]
    }
  ],
  "preloadRule": {
    "pages/index/index": {
      "network": "all",
      "packages": ["pages/user"]
    }
  }
}
```

**3. ä»£ç ä¼˜åŒ–**

```javascript
// é¿å…é¢‘ç¹çš„æ•°æ®æ›´æ–°
let timer = null
function onScroll(e) {
  clearTimeout(timer)
  timer = setTimeout(() => {
    console.log('æ»šåŠ¨ä½ç½®:', e.detail.scrollTop)
  }, 100)
}

// ä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜
const filteredList = computed(() => {
  return list.value.filter(item => item.active)
})
```

---

### æœ¬ç« å°ç»“

| å†…å®¹ | æ ¸å¿ƒè¦ç‚¹ |
|------|----------|
| **uni-appåŸºç¡€** | ä¸€æ¬¡å¼€å‘å¤šç«¯è¿è¡Œã€Vue3è¯­æ³• |
| **ç»„ä»¶å¼€å‘** | å†…ç½®ç»„ä»¶ã€è‡ªå®šä¹‰ç»„ä»¶ã€æ’æ§½ |
| **APIä½¿ç”¨** | ç½‘ç»œè¯·æ±‚ã€æ•°æ®ç¼“å­˜ã€è·¯ç”±è·³è½¬ |
| **æ¡ä»¶ç¼–è¯‘** | è·¨ç«¯å·®å¼‚åŒ–å¤„ç† |
| **çŠ¶æ€ç®¡ç†** | Piniaé›†æˆä½¿ç”¨ |
| **å‘å¸ƒéƒ¨ç½²** | H5ã€å°ç¨‹åºã€Appå¤šç«¯å‘å¸ƒ |

**å­¦ä¹ å»ºè®®ï¼š**
1. å…ˆæŒæ¡H5ç«¯å¼€å‘å’Œè°ƒè¯•
2. ç†è§£æ¡ä»¶ç¼–è¯‘çš„ä½¿ç”¨åœºæ™¯
3. é‡ç‚¹å­¦ä¹ è·¨ç«¯å…¼å®¹æ€§å¤„ç†
4. å¤šå®è·µï¼Œç†Ÿæ‚‰å„å¹³å°ç‰¹æ€§å·®å¼‚

---

**æ­å–œä½ ï¼å·²ç»å®Œæˆäº†Vue3å®Œå…¨æŒ‡å—çš„æ‰€æœ‰ç« èŠ‚å­¦ä¹ ï¼** ğŸ‰
